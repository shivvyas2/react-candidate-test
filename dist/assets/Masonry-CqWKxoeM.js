import{ao as X,al as Y,s as Z,r as C,an as ee,aE as te,aF as se,aG as ne,j as P,ai as oe,ak as re,ad as U,ae,af as E,ac as B,am as H}from"./index-DiONe1dj.js";function ie(e){return Y("MuiMasonry",e)}X("MuiMasonry",["root"]);const c=e=>Number(e.replace("px","")),le={flexBasis:"100%",width:0,margin:0,padding:0},ce=e=>{const{classes:n}=e;return re({root:["root"]},ie,n)},ue=({ownerState:e,theme:n})=>{let r={width:"100%",display:"flex",flexFlow:"column wrap",alignContent:"flex-start",boxSizing:"border-box","& > *":{boxSizing:"border-box"}};const u={};if(e.isSSR){const s={},t=c(n.spacing(e.defaultSpacing));for(let o=1;o<=e.defaultColumns;o+=1)s[`&:nth-of-type(${e.defaultColumns}n+${o%e.defaultColumns})`]={order:o};return u.height=e.defaultHeight,u.margin=-(t/2),u["& > *"]={...r["& > *"],...s,margin:t/2,width:`calc(${(100/e.defaultColumns).toFixed(2)}% - ${t}px)`},{...r,...u}}const a=U({values:e.spacing,breakpoints:n.breakpoints.values}),h=ae(n);r=E(r,B({theme:n},a,s=>{let t;if(typeof s=="string"&&!Number.isNaN(Number(s))||typeof s=="number"){const o=Number(s);t=H(h,o)}else t=s;return{margin:`calc(0px - (${t} / 2))`,"& > *":{margin:`calc(${t} / 2)`},...e.maxColumnHeight&&{height:typeof t=="number"?Math.ceil(e.maxColumnHeight+c(t)):`calc(${e.maxColumnHeight}px + ${t})`}}}));const i=U({values:e.columns,breakpoints:n.breakpoints.values});return r=E(r,B({theme:n},i,s=>{const o=`${(100/Number(s)).toFixed(2)}%`,p=typeof a=="string"&&!Number.isNaN(Number(a))||typeof a=="number"?H(h,Number(a)):"0px";return{"& > *":{width:`calc(${o} - ${p})`}}})),typeof a=="object"&&(r=E(r,B({theme:n},a,(s,t)=>{if(t){const o=Number(s),p=Object.keys(i).pop(),v=H(h,o);return{"& > *":{width:`calc(${`${(100/(typeof i=="object"?i[t]||i[p]:i)).toFixed(2)}%`} - ${v})`}}}return null}))),r},me=Z("div",{name:"MuiMasonry",slot:"Root",overridesResolver:(e,n)=>[n.root]})(ue),fe=C.forwardRef(function(n,r){const u=ee({props:n,name:"MuiMasonry"}),{children:a,className:h,component:O="div",columns:i=4,spacing:R=1,sequential:s=!1,defaultColumns:t,defaultHeight:o,defaultSpacing:p,...v}=u,m=C.useRef(),[F,A]=C.useState(),w=!F&&o&&t!==void 0&&p!==void 0,[W,q]=C.useState(w?t-1:0),V={...u,spacing:R,columns:i,maxColumnHeight:F,defaultColumns:t,defaultHeight:o,defaultSpacing:p,isSSR:w},D=ce(V),j=C.useCallback(d=>{if(!m.current||!d||d.length===0)return;const l=m.current,M=m.current.firstChild,z=l.clientWidth,T=M.clientWidth;if(z===0||T===0)return;const L=window.getComputedStyle(M),_=c(L.marginLeft),J=c(L.marginRight),N=Math.round(z/(T+_+J)),y=new Array(N).fill(0);let b=!1,x=1;l.childNodes.forEach(f=>{if(f.nodeType!==Node.ELEMENT_NODE||f.dataset.class==="line-break"||b)return;const S=window.getComputedStyle(f),K=c(S.marginTop),Q=c(S.marginBottom),$=c(S.height)?Math.ceil(c(S.height))+K+Q:0;if($===0){b=!0;return}for(let g=0;g<f.childNodes.length;g+=1){const k=f.childNodes[g];if(k.tagName==="IMG"&&k.clientHeight===0){b=!0;break}}if(!b)if(s)y[x-1]+=$,f.style.order=x,x+=1,x>N&&(x=1);else{const g=y.indexOf(Math.min(...y));y[g]+=$;const k=g+1;f.style.order=k}}),b||te.flushSync(()=>{A(Math.max(...y)),q(N>0?N-1:0)})},[s]);se(()=>{if(typeof ResizeObserver>"u")return;let d;const l=new ResizeObserver(()=>{d=requestAnimationFrame(j)});return m.current&&m.current.childNodes.forEach(M=>{l.observe(M)}),()=>{d&&cancelAnimationFrame(d),l&&l.disconnect()}},[i,R,a,j]);const G=ne(r,m),I=new Array(W).fill("").map((d,l)=>P.jsx("span",{"data-class":"line-break",style:{...le,order:l+1}},l));return P.jsxs(me,{as:O,className:oe(D.root,h),ref:G,ownerState:V,...v,children:[a,I]})});export{fe as M};
