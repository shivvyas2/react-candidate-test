import{_ as ko,y as Ko,r as q,j as Kt,z as Bo}from"./index-DiONe1dj.js";const qo="Logging",Vo="NoHubcallbackProvidedException";var N;(function(e){e.DEBUG="DEBUG",e.ERROR="ERROR",e.INFO="INFO",e.WARN="WARN",e.VERBOSE="VERBOSE",e.NONE="NONE"})(N||(N={}));const Bt={VERBOSE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5,NONE:6};class D{constructor(t,n=N.WARN){this.name=t,this.level=n,this._pluggables=[]}_padding(t){return t<10?"0"+t:""+t}_ts(){const t=new Date;return[this._padding(t.getMinutes()),this._padding(t.getSeconds())].join(":")+"."+t.getMilliseconds()}configure(t){return t?(this._config=t,this._config):this._config}_log(t,...n){let o=this.level;D.LOG_LEVEL&&(o=D.LOG_LEVEL),typeof window<"u"&&window.LOG_LEVEL&&(o=window.LOG_LEVEL);const i=Bt[o];if(!(Bt[t]>=i))return;let r=console.log.bind(console);t===N.ERROR&&console.error&&(r=console.error.bind(console)),t===N.WARN&&console.warn&&(r=console.warn.bind(console)),D.BIND_ALL_LOG_LEVELS&&(t===N.INFO&&console.info&&(r=console.info.bind(console)),t===N.DEBUG&&console.debug&&(r=console.debug.bind(console)));const c=`[${t}] ${this._ts()} ${this.name}`;let a="";if(n.length===1&&typeof n[0]=="string")a=`${c} - ${n[0]}`,r(a);else if(n.length===1)a=`${c} ${n[0]}`,r(c,n[0]);else if(typeof n[0]=="string"){let d=n.slice(1);d.length===1&&(d=d[0]),a=`${c} - ${n[0]} ${d}`,r(`${c} - ${n[0]}`,d)}else a=`${c} ${n}`,r(c,n);for(const d of this._pluggables){const u={message:a,timestamp:Date.now()};d.pushLogs([u])}}log(...t){this._log(N.INFO,...t)}info(...t){this._log(N.INFO,...t)}warn(...t){this._log(N.WARN,...t)}error(...t){this._log(N.ERROR,...t)}debug(...t){this._log(N.DEBUG,...t)}verbose(...t){this._log(N.VERBOSE,...t)}addPluggable(t){t&&t.getCategoryName()===qo&&(this._pluggables.push(t),t.configure(this._config))}listPluggables(){return this._pluggables}}D.LOG_LEVEL=null;D.BIND_ALL_LOG_LEVELS=!1;class P extends Error{constructor({message:t,name:n,recoverySuggestion:o,underlyingError:i}){super(t),this.name=n,this.underlyingError=i,this.recoverySuggestion=o,this.constructor=P,Object.setPrototypeOf(this,P.prototype)}}var me;(function(e){e.NoEndpointId="NoEndpointId",e.PlatformNotSupported="PlatformNotSupported",e.Unknown="Unknown",e.NetworkError="NetworkError"})(me||(me={}));const $n=(e,t=P)=>(n,o,i)=>{const{message:s,recoverySuggestion:r}=e[o];if(!n)throw new t({name:o,message:i?`${s} ${i}`:s,recoverySuggestion:r})},ne=typeof Symbol<"u"?Symbol("amplify_default"):"@@amplify_default",fe=new D("Hub");class zn{constructor(t){this.listeners=new Map,this.protectedChannels=["core","auth","api","analytics","interactions","pubsub","storage","ui","xr"],this.name=t}_remove(t,n){const o=this.listeners.get(t);if(!o){fe.warn(`No listeners for ${t}`);return}this.listeners.set(t,[...o.filter(({callback:i})=>i!==n)])}dispatch(t,n,o,i){typeof t=="string"&&this.protectedChannels.indexOf(t)>-1&&(i===ne||fe.warn(`WARNING: ${t} is protected and dispatching on it can have unintended consequences`));const s={channel:t,payload:{...n},source:o,patternInfo:[]};try{this._toListeners(s)}catch(r){fe.error(r)}}listen(t,n,o="noname"){let i;if(typeof n!="function")throw new P({name:Vo,message:"No callback supplied to Hub"});i=n;let s=this.listeners.get(t);return s||(s=[],this.listeners.set(t,s)),s.push({name:o,callback:i}),()=>{this._remove(t,i)}}_toListeners(t){const{channel:n,payload:o}=t,i=this.listeners.get(n);i&&i.forEach(s=>{fe.debug(`Dispatching to ${n} with `,o);try{s.callback(t)}catch(r){fe.error(r)}})}}const se=new zn("__default__"),be=new zn("internal-hub"),Wo=()=>{if(typeof window=="object"&&typeof window.crypto=="object")return window.crypto;if(typeof crypto=="object")return crypto;throw new P({name:"MissingPolyfill",message:"Cannot resolve the `crypto` function from the environment."})},Ho=()=>{if(typeof window<"u"&&typeof window.btoa=="function")return window.btoa;if(typeof btoa=="function")return btoa;throw new P({name:"Base64EncoderError",message:"Cannot resolve the `btoa` function from the environment."})},$o=()=>{if(typeof window<"u"&&typeof window.atob=="function")return window.atob;if(typeof atob=="function")return atob;throw new P({name:"Base64EncoderError",message:"Cannot resolve the `atob` function from the environment."})},Gn={convert(e){return $o()(e)}};var V;(function(e){e.AuthTokenConfigException="AuthTokenConfigException",e.AuthUserPoolAndIdentityPoolException="AuthUserPoolAndIdentityPoolException",e.AuthUserPoolException="AuthUserPoolException",e.InvalidIdentityPoolIdException="InvalidIdentityPoolIdException",e.OAuthNotConfigureException="OAuthNotConfigureException"})(V||(V={}));const zo={[V.AuthTokenConfigException]:{message:"Auth Token Provider not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app."},[V.AuthUserPoolAndIdentityPoolException]:{message:"Auth UserPool or IdentityPool not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app with UserPoolId and IdentityPoolId."},[V.AuthUserPoolException]:{message:"Auth UserPool not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app with userPoolId and userPoolClientId."},[V.InvalidIdentityPoolIdException]:{message:"Invalid identity pool id provided.",recoverySuggestion:"Make sure a valid identityPoolId is given in the config."},[V.OAuthNotConfigureException]:{message:"oauth param not configured.",recoverySuggestion:"Make sure to call Amplify.configure with oauth parameter in your app."}},lt=$n(zo);function w(e){let t=!0;e?t=!!e.userPoolId&&!!e.userPoolClientId:t=!1,lt(t,V.AuthUserPoolException)}function jn(e){var n,o,i,s,r,c,a,d;const t=!!((o=(n=e==null?void 0:e.loginWith)==null?void 0:n.oauth)!=null&&o.domain)&&!!((s=(i=e==null?void 0:e.loginWith)==null?void 0:i.oauth)!=null&&s.redirectSignOut)&&!!((c=(r=e==null?void 0:e.loginWith)==null?void 0:r.oauth)!=null&&c.redirectSignIn)&&!!((d=(a=e==null?void 0:e.loginWith)==null?void 0:a.oauth)!=null&&d.responseType);lt(t,V.OAuthNotConfigureException)}function Ae(e){const t=!!(e!=null&&e.identityPoolId);lt(t,V.InvalidIdentityPoolIdException)}function oe(e){const t=e.split(".");if(t.length!==3)throw new Error("Invalid token");try{const o=t[1].replace(/-/g,"+").replace(/_/g,"/"),i=decodeURIComponent(Gn.convert(o).split("").map(r=>`%${`00${r.charCodeAt(0).toString(16)}`.slice(-2)}`).join("")),s=JSON.parse(i);return{toString:()=>e,payload:s}}catch{throw new Error("Invalid token payload")}}const Yn=e=>{const t=Reflect.ownKeys(e);for(const n of t){const o=e[n];(o&&typeof o=="object"||typeof o=="function")&&Yn(o)}return Object.freeze(e)},Go=new D("parseAWSExports"),jo={API_KEY:"apiKey",AWS_IAM:"iam",AMAZON_COGNITO_USER_POOLS:"userPool",OPENID_CONNECT:"oidc",NONE:"none",AWS_LAMBDA:"lambda",LAMBDA:"lambda"},Yo=(e={})=>{var Ut,bt,Mt,Dt,Ft,Ot;if(!Object.prototype.hasOwnProperty.call(e,"aws_project_region"))throw new P({name:"InvalidParameterException",message:"Invalid config parameter.",recoverySuggestion:"Ensure passing the config object imported from  `amplifyconfiguration.json`."});const{aws_appsync_apiKey:t,aws_appsync_authenticationType:n,aws_appsync_graphqlEndpoint:o,aws_appsync_region:i,aws_bots_config:s,aws_cognito_identity_pool_id:r,aws_cognito_sign_up_verification_method:c,aws_cognito_mfa_configuration:a,aws_cognito_mfa_types:d,aws_cognito_password_protection_settings:u,aws_cognito_verification_mechanisms:l,aws_cognito_signup_attributes:h,aws_cognito_social_providers:p,aws_cognito_username_attributes:g,aws_mandatory_sign_in:m,aws_mobile_analytics_app_id:E,aws_mobile_analytics_app_region:S,aws_user_files_s3_bucket:k,aws_user_files_s3_bucket_region:we,aws_user_files_s3_dangerously_connect_to_http_endpoint_for_testing:Tt,aws_user_pools_id:ie,aws_user_pools_web_client_id:No,geo:Rt,oauth:nt,predictions:J,aws_cloud_logic_custom:At,Notifications:Po,modelIntrospection:_t}=e,T={};E&&(T.Analytics={Pinpoint:{appId:E,region:S}});const{InAppMessaging:Q,Push:ee}=Po??{};if(Q!=null&&Q.AWSPinpoint||ee!=null&&ee.AWSPinpoint){if(Q!=null&&Q.AWSPinpoint){const{appId:x,region:te}=Q.AWSPinpoint;T.Notifications={InAppMessaging:{Pinpoint:{appId:x,region:te}}}}if(ee!=null&&ee.AWSPinpoint){const{appId:x,region:te}=ee.AWSPinpoint;T.Notifications={...T.Notifications,PushNotification:{Pinpoint:{appId:x,region:te}}}}}if(Array.isArray(s)&&(T.Interactions={LexV1:Object.fromEntries(s.map(x=>[x.name,x]))}),o){const x=jo[n];x||Go.debug(`Invalid authentication type ${n}. Falling back to IAM.`),T.API={GraphQL:{endpoint:o,apiKey:t,region:i,defaultAuthMode:x??"iam"}},_t&&(T.API.GraphQL.modelIntrospection=_t)}const Uo=a?{status:a&&a.toLowerCase(),totpEnabled:(d==null?void 0:d.includes("TOTP"))??!1,smsEnabled:(d==null?void 0:d.includes("SMS"))??!1}:void 0,bo=u?{minLength:u.passwordPolicyMinLength,requireLowercase:((Ut=u.passwordPolicyCharacters)==null?void 0:Ut.includes("REQUIRES_LOWERCASE"))??!1,requireUppercase:((bt=u.passwordPolicyCharacters)==null?void 0:bt.includes("REQUIRES_UPPERCASE"))??!1,requireNumbers:((Mt=u.passwordPolicyCharacters)==null?void 0:Mt.includes("REQUIRES_NUMBERS"))??!1,requireSpecialCharacters:((Dt=u.passwordPolicyCharacters)==null?void 0:Dt.includes("REQUIRES_SYMBOLS"))??!1}:void 0,Mo=Array.from(new Set([...l??[],...h??[]])).reduce((x,te)=>({...x,[te.toLowerCase()]:{required:!0}}),{}),Nt=(g==null?void 0:g.includes("EMAIL"))??!1,Pt=(g==null?void 0:g.includes("PHONE_NUMBER"))??!1;(r||ie)&&(T.Auth={Cognito:{identityPoolId:r,allowGuestAccess:m!=="enable",signUpVerificationMethod:c,userAttributes:Mo,userPoolClientId:No,userPoolId:ie,mfa:Uo,passwordFormat:bo,loginWith:{username:!(Nt||Pt),email:Nt,phone:Pt}}});const Do=nt?Object.keys(nt).length>0:!1,Fo=p?p.length>0:!1;if(T.Auth&&Do&&(T.Auth.Cognito.loginWith={...T.Auth.Cognito.loginWith,oauth:{...Jo(nt),...Fo&&{providers:Xo(p)}}}),k&&(T.Storage={S3:{bucket:k,region:we,dangerouslyConnectToHttpEndpointForTesting:Tt}}),Rt){const{amazon_location_service:x}=Rt;T.Geo={LocationService:{maps:x.maps,geofenceCollections:x.geofenceCollections,searchIndices:x.search_indices,region:x.region}}}if(At&&(T.API={...T.API,REST:At.reduce((x,te)=>{const{name:Oo,endpoint:Lo,region:Lt,service:kt}=te;return{...x,[Oo]:{endpoint:Lo,...kt?{service:kt}:void 0,...Lt?{region:Lt}:void 0}}},{})}),J){const{VoiceId:x}=((Ot=(Ft=J==null?void 0:J.convert)==null?void 0:Ft.speechGenerator)==null?void 0:Ot.defaults)??{};T.Predictions=x?{...J,convert:{...J.convert,speechGenerator:{...J.convert.speechGenerator,defaults:{voiceId:x}}}}:J}return T},qt=e=>(e==null?void 0:e.split(","))??[],Jo=({domain:e,scope:t,redirectSignIn:n,redirectSignOut:o,responseType:i})=>({domain:e,scopes:t,redirectSignIn:qt(n),redirectSignOut:qt(o),responseType:i}),Xo=e=>e.map(t=>{const n=t.toLowerCase();return n.charAt(0).toUpperCase()+n.slice(1)}),Zo=Symbol("oauth-listener");function Qo(e){const{version:t}=e;return t?t.startsWith("1"):!1}function ei(e){if(!e)return;const{bucket_name:t,aws_region:n,buckets:o}=e;return{S3:{bucket:t,region:n,buckets:o&&li(o)}}}function ti(e){if(!e)return;const{user_pool_id:t,user_pool_client_id:n,identity_pool_id:o,password_policy:i,mfa_configuration:s,mfa_methods:r,unauthenticated_identities_enabled:c,oauth:a,username_attributes:d,standard_required_attributes:u}=e,l={Cognito:{userPoolId:t,userPoolClientId:n}};return o&&(l.Cognito={...l.Cognito,identityPoolId:o}),i&&(l.Cognito.passwordFormat={requireLowercase:i.require_lowercase,requireNumbers:i.require_numbers,requireUppercase:i.require_uppercase,requireSpecialCharacters:i.require_symbols,minLength:i.min_length??6}),s&&(l.Cognito.mfa={status:ui(s),smsEnabled:r==null?void 0:r.includes("SMS"),totpEnabled:r==null?void 0:r.includes("TOTP")}),c&&(l.Cognito.allowGuestAccess=c),a&&(l.Cognito.loginWith={oauth:{domain:a.domain,redirectSignIn:a.redirect_sign_in_uri,redirectSignOut:a.redirect_sign_out_uri,responseType:a.response_type==="token"?"token":"code",scopes:a.scopes,providers:di(a.identity_providers)}}),d&&(l.Cognito.loginWith={...l.Cognito.loginWith,email:d.includes("email"),phone:d.includes("phone_number"),username:d.includes("username")}),u&&(l.Cognito.userAttributes=u.reduce((h,p)=>({...h,[p]:{required:!0}}),{})),l}function ni(e){if(!(e!=null&&e.amazon_pinpoint))return;const{amazon_pinpoint:t}=e;return{Pinpoint:{appId:t.app_id,region:t.aws_region}}}function oi(e){if(!e)return;const{aws_region:t,geofence_collections:n,maps:o,search_indices:i}=e;return{LocationService:{region:t,searchIndices:i,geofenceCollections:n,maps:o}}}function ii(e){if(!e)return;const{aws_region:t,default_authorization_type:n,url:o,api_key:i,model_introspection:s}=e;return{GraphQL:{endpoint:o,defaultAuthMode:ci(n),region:t,apiKey:i,modelIntrospection:s}}}function si(e){if(!e)return;const{aws_region:t,channels:n,amazon_pinpoint_app_id:o}=e,i=n.includes("IN_APP_MESSAGING"),s=n.includes("APNS")||n.includes("FCM");if(!(i||s))return;const r={};return i&&(r.InAppMessaging={Pinpoint:{appId:o,region:t}}),s&&(r.PushNotification={Pinpoint:{appId:o,region:t}}),r}function ri(e){const t={};return e.storage&&(t.Storage=ei(e.storage)),e.auth&&(t.Auth=ti(e.auth)),e.analytics&&(t.Analytics=ni(e.analytics)),e.geo&&(t.Geo=oi(e.geo)),e.data&&(t.API=ii(e.data)),e.notifications&&(t.Notifications=si(e.notifications)),t}const ai={AMAZON_COGNITO_USER_POOLS:"userPool",API_KEY:"apiKey",AWS_IAM:"iam",AWS_LAMBDA:"lambda",OPENID_CONNECT:"oidc"};function ci(e){return ai[e]}const Vt={GOOGLE:"Google",LOGIN_WITH_AMAZON:"Amazon",FACEBOOK:"Facebook",SIGN_IN_WITH_APPLE:"Apple"};function di(e=[]){return e.reduce((t,n)=>(Vt[n]!==void 0&&t.push(Vt[n]),t),[])}function ui(e){return e==="OPTIONAL"?"optional":e==="REQUIRED"?"on":"off"}function li(e){const t={};return e.forEach(({name:n,bucket_name:o,aws_region:i})=>{if(n in t)throw new Error(`Duplicate friendly name found: ${n}. Name must be unique.`);t[n]={bucketName:o,region:i}}),t}const Jn=e=>Object.keys(e).some(t=>t.startsWith("aws_"))?Yo(e):Qo(e)?ri(e):e;function Wt({expiresAt:e,clockDrift:t}){return Date.now()+t>e}class hi{configure(t,n){this.authConfig=t,this.authOptions=n}async fetchAuthSession(t={}){var s,r,c,a,d,u;let n,o;const i=await this.getTokens(t);return i?(o=(r=(s=i.accessToken)==null?void 0:s.payload)==null?void 0:r.sub,n=await((a=(c=this.authOptions)==null?void 0:c.credentialsProvider)==null?void 0:a.getCredentialsAndIdentityId({authConfig:this.authConfig,tokens:i,authenticated:!0,forceRefresh:t.forceRefresh}))):n=await((u=(d=this.authOptions)==null?void 0:d.credentialsProvider)==null?void 0:u.getCredentialsAndIdentityId({authConfig:this.authConfig,authenticated:!1,forceRefresh:t.forceRefresh})),{tokens:i,credentials:n==null?void 0:n.credentials,identityId:n==null?void 0:n.identityId,userSub:o}}async clearCredentials(){var t,n;await((n=(t=this.authOptions)==null?void 0:t.credentialsProvider)==null?void 0:n.clearCredentialsAndIdentityId())}async getTokens(t){var n,o;return await((o=(n=this.authOptions)==null?void 0:n.tokenProvider)==null?void 0:o.getTokens(t))??void 0}}var b=64,fi=32,pi=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),gi=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],Ei=Math.pow(2,53)-1,_e=function(){function e(){this.state=Int32Array.from(gi),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(t){if(this.finished)throw new Error("Attempted to update an already finished hash.");var n=0,o=t.byteLength;if(this.bytesHashed+=o,this.bytesHashed*8>Ei)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;o>0;)this.buffer[this.bufferLength++]=t[n++],o--,this.bufferLength===b&&(this.hashBuffer(),this.bufferLength=0)},e.prototype.digest=function(){if(!this.finished){var t=this.bytesHashed*8,n=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),o=this.bufferLength;if(n.setUint8(this.bufferLength++,128),o%b>=b-8){for(var i=this.bufferLength;i<b;i++)n.setUint8(i,0);this.hashBuffer(),this.bufferLength=0}for(var i=this.bufferLength;i<b-8;i++)n.setUint8(i,0);n.setUint32(b-8,Math.floor(t/4294967296),!0),n.setUint32(b-4,t),this.hashBuffer(),this.finished=!0}for(var s=new Uint8Array(fi),i=0;i<8;i++)s[i*4]=this.state[i]>>>24&255,s[i*4+1]=this.state[i]>>>16&255,s[i*4+2]=this.state[i]>>>8&255,s[i*4+3]=this.state[i]>>>0&255;return s},e.prototype.hashBuffer=function(){for(var t=this,n=t.buffer,o=t.state,i=o[0],s=o[1],r=o[2],c=o[3],a=o[4],d=o[5],u=o[6],l=o[7],h=0;h<b;h++){if(h<16)this.temp[h]=(n[h*4]&255)<<24|(n[h*4+1]&255)<<16|(n[h*4+2]&255)<<8|n[h*4+3]&255;else{var p=this.temp[h-2],g=(p>>>17|p<<15)^(p>>>19|p<<13)^p>>>10;p=this.temp[h-15];var m=(p>>>7|p<<25)^(p>>>18|p<<14)^p>>>3;this.temp[h]=(g+this.temp[h-7]|0)+(m+this.temp[h-16]|0)}var E=(((a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7))+(a&d^~a&u)|0)+(l+(pi[h]+this.temp[h]|0)|0)|0,S=((i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10))+(i&s^i&r^s&r)|0;l=u,u=d,d=a,a=c+E|0,c=r,r=s,s=i,i=E+S|0}o[0]+=i,o[1]+=s,o[2]+=r,o[3]+=c,o[4]+=a,o[5]+=d,o[6]+=u,o[7]+=l},e}();const mi=e=>new TextEncoder().encode(e);var Ii=typeof Buffer<"u"&&Buffer.from?function(e){return Buffer.from(e,"utf8")}:mi;function Xn(e){return e instanceof Uint8Array?e:typeof e=="string"?Ii(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}function yi(e){return typeof e=="string"?e.length===0:e.byteLength===0}var Me=function(){function e(t){this.secret=t,this.hash=new _e,this.reset()}return e.prototype.update=function(t){if(!(yi(t)||this.error))try{this.hash.update(Xn(t))}catch(n){this.error=n}},e.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},e.prototype.digest=function(){return ko(this,void 0,void 0,function(){return Ko(this,function(t){return[2,this.digestSync()]})})},e.prototype.reset=function(){if(this.hash=new _e,this.secret){this.outer=new _e;var t=Si(this.secret),n=new Uint8Array(b);n.set(t);for(var o=0;o<b;o++)t[o]^=54,n[o]^=92;this.hash.update(t),this.outer.update(n);for(var o=0;o<t.byteLength;o++)t[o]=0}},e}();function Si(e){var t=Xn(e);if(t.byteLength>b){var n=new _e;n.update(t),t=n.digest()}var o=new Uint8Array(b);return o.set(t),o}for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`)}var C;(function(e){e.WebUnknown="0",e.React="1",e.NextJs="2",e.Angular="3",e.VueJs="4",e.Nuxt="5",e.Svelte="6",e.ServerSideUnknown="100",e.ReactSSR="101",e.NextJsSSR="102",e.AngularSSR="103",e.VueJsSSR="104",e.NuxtSSR="105",e.SvelteSSR="106",e.ReactNative="201",e.Expo="202"})(C||(C={}));var it;(function(e){e.AI="ai",e.API="api",e.Auth="auth",e.Analytics="analytics",e.DataStore="datastore",e.Geo="geo",e.InAppMessaging="inappmessaging",e.Interactions="interactions",e.Predictions="predictions",e.PubSub="pubsub",e.PushNotification="pushnotification",e.Storage="storage"})(it||(it={}));var Ht;(function(e){e.CreateConversation="1",e.GetConversation="2",e.ListConversations="3",e.DeleteConversation="4",e.SendMessage="5",e.ListMessages="6",e.OnMessage="7",e.Generation="8",e.UpdateConversation="9"})(Ht||(Ht={}));var $t;(function(e){e.Record="1",e.IdentifyUser="2"})($t||($t={}));var zt;(function(e){e.GraphQl="1",e.Get="2",e.Post="3",e.Put="4",e.Patch="5",e.Del="6",e.Head="7"})(zt||(zt={}));var F;(function(e){e.SignUp="1",e.ConfirmSignUp="2",e.ResendSignUpCode="3",e.SignIn="4",e.FetchMFAPreference="6",e.UpdateMFAPreference="7",e.SetUpTOTP="10",e.VerifyTOTPSetup="11",e.ConfirmSignIn="12",e.DeleteUserAttributes="15",e.DeleteUser="16",e.UpdateUserAttributes="17",e.FetchUserAttributes="18",e.ConfirmUserAttribute="22",e.SignOut="26",e.UpdatePassword="27",e.ResetPassword="28",e.ConfirmResetPassword="29",e.FederatedSignIn="30",e.RememberDevice="32",e.ForgetDevice="33",e.FetchDevices="34",e.SendUserAttributeVerificationCode="35",e.SignInWithRedirect="36"})(F||(F={}));var Gt;(function(e){e.Subscribe="1",e.GraphQl="2"})(Gt||(Gt={}));var jt;(function(e){e.SearchByText="0",e.SearchByCoordinates="1",e.SearchForSuggestions="2",e.SearchByPlaceId="3",e.SaveGeofences="4",e.GetGeofence="5",e.ListGeofences="6",e.DeleteGeofences="7"})(jt||(jt={}));var Yt;(function(e){e.SyncMessages="1",e.IdentifyUser="2",e.NotifyMessageInteraction="3"})(Yt||(Yt={}));var Jt;(function(e){e.None="0"})(Jt||(Jt={}));var Xt;(function(e){e.Convert="1",e.Identify="2",e.Interpret="3"})(Xt||(Xt={}));var Zt;(function(e){e.Subscribe="1"})(Zt||(Zt={}));var Qt;(function(e){e.InitializePushNotifications="1",e.IdentifyUser="2"})(Qt||(Qt={}));var en;(function(e){e.UploadData="1",e.DownloadData="2",e.List="3",e.Copy="4",e.Remove="5",e.GetProperties="6",e.GetUrl="7"})(en||(en={}));const wi="6.6.5",Ke=()=>typeof global<"u",de=()=>typeof window<"u",Zn=()=>typeof document<"u",ht=()=>typeof process<"u",Ie=(e,t)=>!!Object.keys(e).find(n=>n.startsWith(t));var tn={};function xi(){const e=o=>o.startsWith("_react")||o.startsWith("__react"),t=o=>Object.keys(o).find(e),n=()=>Array.from(document.querySelectorAll("[id]"));return Zn()&&n().some(t)}function vi(){return ht()&&typeof tn<"u"&&!!Object.keys(tn).find(e=>e.includes("react"))}function Ci(){return de()&&Ie(window,"__VUE")}function Ti(){return Ke()&&Ie(global,"__VUE")}var nn={};function Ri(){return de()&&Ie(window,"__SVELTE")}function Ai(){return ht()&&typeof nn<"u"&&!!Object.keys(nn).find(e=>e.includes("svelte"))}function _i(){return de()&&window.next&&typeof window.next=="object"}function Ni(){return Ke()&&(Ie(global,"__next")||Ie(global,"__NEXT"))}function Pi(){return de()&&(window.__NUXT__!==void 0||window.$nuxt!==void 0)}function Ui(){return Ke()&&typeof global.__NUXT_PATHS__<"u"}var on={};function bi(){const e=!!(Zn()&&document.querySelector("[ng-version]")),t=!!(de()&&typeof window.ng<"u");return e||t}function Mi(){var e;return ht()&&typeof on=="object"&&((e=on.npm_lifecycle_script)==null?void 0:e.startsWith("ng "))||!1}function Di(){return typeof navigator<"u"&&typeof navigator.product<"u"&&navigator.product==="ReactNative"}function Fi(){return Ke()&&typeof global.expo<"u"}function Oi(){return de()}const Li=[{platform:C.Expo,detectionMethod:Fi},{platform:C.ReactNative,detectionMethod:Di},{platform:C.NextJs,detectionMethod:_i},{platform:C.Nuxt,detectionMethod:Pi},{platform:C.Angular,detectionMethod:bi},{platform:C.React,detectionMethod:xi},{platform:C.VueJs,detectionMethod:Ci},{platform:C.Svelte,detectionMethod:Ri},{platform:C.WebUnknown,detectionMethod:Oi},{platform:C.NextJsSSR,detectionMethod:Ni},{platform:C.NuxtSSR,detectionMethod:Ui},{platform:C.ReactSSR,detectionMethod:vi},{platform:C.VueJsSSR,detectionMethod:Ti},{platform:C.AngularSSR,detectionMethod:Mi},{platform:C.SvelteSSR,detectionMethod:Ai}];function ki(){var e;return((e=Li.find(t=>t.detectionMethod()))==null?void 0:e.platform)||C.ServerSideUnknown}let Ee;const Ne=[];let De=!1;const Ki=10,Bi=10,qi=1e3,Qn=()=>{var e;if(!Ee){if(Ee=ki(),De)for(;Ne.length;)(e=Ne.pop())==null||e();else Ne.forEach(t=>{t()});sn(C.ServerSideUnknown,Ki),sn(C.WebUnknown,Bi)}return Ee},Vi=e=>{De||Ne.push(e)};function Wi(){Ee=void 0}function sn(e,t){Ee===e&&!De&&setTimeout(()=>{Wi(),De=!0,setTimeout(Qn,qi)},t)}const Hi={},$i=(e,t)=>{var n,o;return(o=(n=Hi[e])==null?void 0:n[t])==null?void 0:o.additionalDetails},zi="aws-amplify",Gi=e=>e.replace(/\+.*/,""),ji=({category:e,action:t}={})=>{const n=[[zi,Gi(wi)]];if(e&&n.push([e,t]),n.push(["framework",Qn()]),e&&t){const o=$i(e,t);o&&o.forEach(i=>{n.push(i)})}return n},Be=e=>ji(e).map(([o,i])=>o&&i?`${o}/${i}`:o).join(" "),Yi=()=>typeof window<"u"&&typeof window.document<"u";class Ji{constructor(){this.oAuthListener=void 0,this.resourcesConfig={},this.libraryOptions={},this.Auth=new hi}configure(t,n){const o=Jn(t);this.resourcesConfig=o,n&&(this.libraryOptions=n),this.resourcesConfig=Yn(this.resourcesConfig),this.Auth.configure(this.resourcesConfig.Auth,this.libraryOptions.Auth),se.dispatch("core",{event:"configure",data:this.resourcesConfig},"Configure",ne),this.notifyOAuthListener()}getConfig(){return this.resourcesConfig}[Zo](t){var n,o,i;(o=(n=this.resourcesConfig.Auth)==null?void 0:n.Cognito.loginWith)!=null&&o.oauth?t((i=this.resourcesConfig.Auth)==null?void 0:i.Cognito):this.oAuthListener=t}notifyOAuthListener(){var t,n,o;!((n=(t=this.resourcesConfig.Auth)==null?void 0:t.Cognito.loginWith)!=null&&n.oauth)||!this.oAuthListener||(this.oAuthListener((o=this.resourcesConfig.Auth)==null?void 0:o.Cognito),this.oAuthListener=void 0)}}const v=new Ji,eo=(e,t)=>e.Auth.fetchAuthSession(t),Xi=e=>eo(v,e);function to(){return v.Auth.clearCredentials()}const qe=e=>{const{headers:t,statusCode:n}=e;return{...Zi(e)?e.$metadata:{},httpStatusCode:n,requestId:t["x-amzn-requestid"]??t["x-amzn-request-id"]??t["x-amz-request-id"],extendedRequestId:t["x-amz-id-2"],cfId:t["x-amz-cf-id"]}},Zi=e=>typeof(e==null?void 0:e.$metadata)=="object",ye=async e=>{if(!e||e.statusCode<300)return;const t=await Ve(e),o=(r=>{const[c]=r.toString().split(/[,:]+/);return c.includes("#")?c.split("#")[1]:c})(e.headers["x-amzn-errortype"]??t.code??t.__type??"UnknownError"),i=t.message??t.Message??"Unknown error",s=new Error(i);return Object.assign(s,{name:o,$metadata:qe(e)})},Ve=async e=>{if(!e.body)throw new Error("Missing response payload");const t=await e.body.json();return Object.assign(t,{$metadata:qe(e)})},L=(e,t,n,o)=>async(i,s)=>{const r={...o,...i},c=await r.endpointResolver(r,s),a=await t(s,c),d=await e(a,{...r});return n(d)},no={id:"aws",outputs:{dnsSuffix:"amazonaws.com"},regionRegex:"^(us|eu|ap|sa|ca|me|af)\\-\\w+\\-\\d+$",regions:["aws-global"]},Qi={partitions:[no,{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn"},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:["aws-cn-global"]}]},oo=e=>{const{partitions:t}=Qi;for(const{regions:n,outputs:o,regionRegex:i}of t){const s=new RegExp(i);if(n.includes(e)||s.test(e))return o.dnsSuffix}return no.outputs.dnsSuffix},es=3,ts=({maxAttempts:e=es,retryDecider:t,computeDelay:n,abortSignal:o})=>{if(e<1)throw new Error("maxAttempts must be greater than 0");return(i,s)=>async function(c){let a,d=s.attemptsCount??0,u;const l=()=>{if(u)return rn(u,d),u;throw rn(a,d),a};for(;!(o!=null&&o.aborted)&&d<e;){try{u=await i(c),a=void 0}catch(h){a=h,u=void 0}if(d=(s.attemptsCount??0)>d?s.attemptsCount??0:d+1,s.attemptsCount=d,await t(u,a)){if(!(o!=null&&o.aborted)&&d<e){const h=n(d);await ns(h,o)}continue}else return l()}if(o!=null&&o.aborted)throw new Error("Request aborted.");return l()}},ns=(e,t)=>{if(t!=null&&t.aborted)return Promise.resolve();let n,o;const i=new Promise(s=>{o=s,n=setTimeout(s,e)});return t==null||t.addEventListener("abort",function s(r){clearTimeout(n),t==null||t.removeEventListener("abort",s),o()}),i},rn=(e,t)=>{Object.prototype.toString.call(e)==="[object Object]"&&(e.$metadata={...e.$metadata??{},attempts:t})},os=({userAgentHeader:e="x-amz-user-agent",userAgentValue:t=""})=>n=>async function(i){if(t.trim().length===0)return await n(i);{const s=e.toLowerCase();return i.headers[s]=i.headers[s]?`${i.headers[s]} ${t}`:t,await n(i)}},ft=(e,t)=>(n,o)=>{const i={};let s=r=>e(r,o);for(let r=t.length-1;r>=0;r--){const c=t[r];s=c(o)(s,i)}return s(n)},ot=e=>{let t;return()=>(t||(t=e()),t)},is=e=>!["HEAD","GET","DELETE"].includes(e.toUpperCase()),ss=async({url:e,method:t,headers:n,body:o},{abortSignal:i,cache:s,withCrossDomainCredentials:r})=>{var l;let c;try{c=await fetch(e,{method:t,headers:n,body:is(t)?o:void 0,signal:i,cache:s,credentials:r?"include":"same-origin"})}catch(h){throw h instanceof TypeError?new P({name:me.NetworkError,message:"A network error has occurred.",underlyingError:h}):h}const a={};(l=c.headers)==null||l.forEach((h,p)=>{a[p.toLowerCase()]=h});const d={statusCode:c.status,headers:a,body:null},u=Object.assign(c.body??{},{text:ot(()=>c.text()),blob:ot(()=>c.blob()),json:ot(()=>c.json())});return{...d,body:u}},io=ft(ss,[os,ts]),rs=5*60*1e3;function as(e=rs){return o=>{const i=2**o*100+100*Math.random();return i>e?!1:i}}const an=5*60*1e3,so=e=>{const n=as(an)(e);return n===!1?an:n},cs=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch","BadRequestException"],ds=e=>!!e&&cs.includes(e),ro=e=>async(t,n)=>{const o=n??await e(t)??void 0,i=(o==null?void 0:o.code)||(o==null?void 0:o.name),s=t==null?void 0:t.statusCode;return fs(n)||hs(s,i)||ds(i)||ps(s,i)},us=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException"],ls=["TimeoutError","RequestTimeout","RequestTimeoutException"],hs=(e,t)=>e===429||!!t&&us.includes(t),fs=e=>(e==null?void 0:e.name)==="Network error",ps=(e,t)=>!!e&&[500,502,503,504].includes(e)||!!t&&ls.includes(t),We=URL,gs="cognito-identity",Es=({region:e})=>({url:new We(`https://cognito-identity.${e}.${oo(e)}`)}),ms=()=>e=>async function(n){return n.headers["cache-control"]="no-store",e(n)},ao=ft(io,[ms]),pt={service:gs,endpointResolver:Es,retryDecider:ro(ye),computeDelay:so,userAgentValue:Be(),cache:"no-store"};Vi(()=>{pt.userAgentValue=Be()});const co=e=>({"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityService.${e}`}),uo=({url:e},t,n)=>({headers:t,url:e,body:n,method:"POST"}),Is=(e,t)=>{const n=co("GetId"),o=JSON.stringify(e);return uo(t,n,o)},ys=async e=>{if(e.statusCode>=300)throw await ye(e);return{IdentityId:(await Ve(e)).IdentityId,$metadata:qe(e)}},Ss=L(ao,Is,ys,pt),ws=(e,t)=>{const n=co("GetCredentialsForIdentity"),o=JSON.stringify(e);return uo(t,n,o)},xs=async e=>{if(e.statusCode>=300)throw await ye(e);{const t=await Ve(e);return{IdentityId:t.IdentityId,Credentials:vs(t.Credentials),$metadata:qe(e)}}},vs=({AccessKeyId:e,SecretKey:t,SessionToken:n,Expiration:o}={})=>({AccessKeyId:e,SecretKey:t,SessionToken:n,Expiration:o&&new Date(o*1e3)}),cn=L(ao,ws,xs,pt);class xe extends P{constructor(){super({name:me.PlatformNotSupported,message:"Function not supported on current platform"})}}class lo{constructor(t){this.storage=t}async setItem(t,n){if(!this.storage)throw new xe;this.storage.setItem(t,n)}async getItem(t){if(!this.storage)throw new xe;return this.storage.getItem(t)}async removeItem(t){if(!this.storage)throw new xe;this.storage.removeItem(t)}async clear(){if(!this.storage)throw new xe;this.storage.clear()}}class ho{constructor(){this.storage=new Map}get length(){return this.storage.size}key(t){return t>this.length-1?null:Array.from(this.storage.keys())[t]}setItem(t,n){this.storage.set(t,n)}getItem(t){return this.storage.get(t)??null}removeItem(t){this.storage.delete(t)}clear(){this.storage.clear()}}const Cs=()=>typeof window<"u"&&window.localStorage?window.localStorage:new ho,Ts=()=>typeof window<"u"&&window.sessionStorage?window.sessionStorage:new ho;class Rs extends lo{constructor(){super(Cs())}}class As extends lo{constructor(){super(Ts())}}/*! js-cookie v3.0.5 | MIT */function ve(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)e[o]=n[o]}return e}var _s={read:function(e){return e[0]==='"'&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function st(e,t){function n(i,s,r){if(!(typeof document>"u")){r=ve({},t,r),typeof r.expires=="number"&&(r.expires=new Date(Date.now()+r.expires*864e5)),r.expires&&(r.expires=r.expires.toUTCString()),i=encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var c="";for(var a in r)r[a]&&(c+="; "+a,r[a]!==!0&&(c+="="+r[a].split(";")[0]));return document.cookie=i+"="+e.write(s,i)+c}}function o(i){if(!(typeof document>"u"||arguments.length&&!i)){for(var s=document.cookie?document.cookie.split("; "):[],r={},c=0;c<s.length;c++){var a=s[c].split("="),d=a.slice(1).join("=");try{var u=decodeURIComponent(a[0]);if(r[u]=e.read(d,u),i===u)break}catch{}}return i?r[i]:r}}return Object.create({set:n,get:o,remove:function(i,s){n(i,"",ve({},s,{expires:-1}))},withAttributes:function(i){return st(this.converter,ve({},this.attributes,i))},withConverter:function(i){return st(ve({},this.converter,i),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(e)}})}var Ce=st(_s,{path:"/"});class dn{constructor(t={}){const{path:n,domain:o,expires:i,sameSite:s,secure:r}=t;if(this.domain=o,this.path=n||"/",this.expires=Object.prototype.hasOwnProperty.call(t,"expires")?i:365,this.secure=Object.prototype.hasOwnProperty.call(t,"secure")?r:!0,Object.prototype.hasOwnProperty.call(t,"sameSite")){if(!s||!["strict","lax","none"].includes(s))throw new Error('The sameSite value of cookieStorage must be "lax", "strict" or "none".');if(s==="none"&&!this.secure)throw new Error("sameSite = None requires the Secure attribute in latest browser versions.");this.sameSite=s}}async setItem(t,n){Ce.set(t,n,this.getData())}async getItem(t){return Ce.get(t)??null}async removeItem(t){Ce.remove(t,this.getData())}async clear(){const t=Ce.get(),n=Object.keys(t).map(o=>this.removeItem(o));await Promise.all(n)}getData(){return{path:this.path,expires:this.expires,domain:this.domain,secure:this.secure,...this.sameSite&&{sameSite:this.sameSite}}}}const re=new Rs;new As;const Ns=e=>{let t;return async(...n)=>t||(t=new Promise((o,i)=>{e(...n).then(s=>{o(s)}).catch(s=>{i(s)}).finally(()=>{t=void 0})}),t)},Ps=async()=>{const{userAgentData:e}=navigator;if(!e)return navigator.userAgent;const{platform:t="",platformVersion:n="",model:o="",architecture:i="",fullVersionList:s=[]}=await e.getHighEntropyValues(["platform","platformVersion","architecture","model","fullVersionList"]),r=s.map(a=>`${a.brand}/${a.version}`).join(";");return[t,n,i,o,t,r].filter(a=>a).join(" ")};function Us(e){return Array.from(e,t=>String.fromCodePoint(t)).join("")}const Fe={convert(e,t={urlSafe:!1,skipPadding:!1}){const n=typeof e=="string"?e:Us(e);let o=Ho()(n);return t.urlSafe&&(o=o.replace(/\+/g,"-").replace(/\//g,"_")),t.skipPadding&&(o=o.replace(/=/g,"")),o}};function bs(){return Wo().getRandomValues(new Uint32Array(1))[0]}function Ms(e){const{words:t}=e,{sigBytes:n}=e,o=[];for(let i=0;i<n;i++){const s=t[i>>>2]>>>24-i%4*8&255;o.push((s>>>4).toString(16)),o.push((s&15).toString(16))}return o.join("")}class gt{constructor(t,n){this.words=[];let o=t;o=this.words=o||[],n!==void 0?this.sigBytes=n:this.sigBytes=o.length*4}random(t){const n=[];for(let o=0;o<t;o+=4)n.push(bs());return new gt(n,t)}toString(){return Ms(this)}}var y;(function(e){e.EmptySignInUsername="EmptySignInUsername",e.EmptySignInPassword="EmptySignInPassword",e.CustomAuthSignInPassword="CustomAuthSignInPassword",e.EmptySignUpUsername="EmptySignUpUsername",e.EmptySignUpPassword="EmptySignUpPassword",e.EmptyConfirmSignUpUsername="EmptyConfirmSignUpUsername",e.EmptyConfirmSignUpCode="EmptyConfirmSignUpCode",e.EmptyResendSignUpCodeUsername="EmptyresendSignUpCodeUsername",e.EmptyChallengeResponse="EmptyChallengeResponse",e.EmptyConfirmResetPasswordUsername="EmptyConfirmResetPasswordUsername",e.EmptyConfirmResetPasswordNewPassword="EmptyConfirmResetPasswordNewPassword",e.EmptyConfirmResetPasswordConfirmationCode="EmptyConfirmResetPasswordConfirmationCode",e.EmptyResetPasswordUsername="EmptyResetPasswordUsername",e.EmptyVerifyTOTPSetupCode="EmptyVerifyTOTPSetupCode",e.EmptyConfirmUserAttributeCode="EmptyConfirmUserAttributeCode",e.IncorrectMFAMethod="IncorrectMFAMethod",e.EmptyUpdatePassword="EmptyUpdatePassword"})(y||(y={}));const Ds={[y.EmptyChallengeResponse]:{message:"challengeResponse is required to confirmSignIn"},[y.EmptyConfirmResetPasswordUsername]:{message:"username is required to confirmResetPassword"},[y.EmptyConfirmSignUpCode]:{message:"code is required to confirmSignUp"},[y.EmptyConfirmSignUpUsername]:{message:"username is required to confirmSignUp"},[y.EmptyConfirmResetPasswordConfirmationCode]:{message:"confirmationCode is required to confirmResetPassword"},[y.EmptyConfirmResetPasswordNewPassword]:{message:"newPassword is required to confirmResetPassword"},[y.EmptyResendSignUpCodeUsername]:{message:"username is required to confirmSignUp"},[y.EmptyResetPasswordUsername]:{message:"username is required to resetPassword"},[y.EmptySignInPassword]:{message:"password is required to signIn"},[y.EmptySignInUsername]:{message:"username is required to signIn"},[y.EmptySignUpPassword]:{message:"password is required to signUp"},[y.EmptySignUpUsername]:{message:"username is required to signUp"},[y.CustomAuthSignInPassword]:{message:"A password is not needed when signing in with CUSTOM_WITHOUT_SRP",recoverySuggestion:"Do not include a password in your signIn call."},[y.IncorrectMFAMethod]:{message:"Incorrect MFA method was chosen. It should be either SMS or TOTP",recoverySuggestion:"Try to pass TOTP or SMS as the challengeResponse"},[y.EmptyVerifyTOTPSetupCode]:{message:"code is required to verifyTotpSetup"},[y.EmptyUpdatePassword]:{message:"oldPassword and newPassword are required to changePassword"},[y.EmptyConfirmUserAttributeCode]:{message:"confirmation code is required to confirmUserAttribute"}};var un;(function(e){e.DEFAULT_MSG="Authentication Error",e.EMPTY_EMAIL="Email cannot be empty",e.EMPTY_PHONE="Phone number cannot be empty",e.EMPTY_USERNAME="Username cannot be empty",e.INVALID_USERNAME="The username should either be a string or one of the sign in types",e.EMPTY_PASSWORD="Password cannot be empty",e.EMPTY_CODE="Confirmation code cannot be empty",e.SIGN_UP_ERROR="Error creating account",e.NO_MFA="No valid MFA method provided",e.INVALID_MFA="Invalid MFA type",e.EMPTY_CHALLENGE="Challenge response cannot be empty",e.NO_USER_SESSION="Failed to get the session because the user is empty",e.NETWORK_ERROR="Network Error",e.DEVICE_CONFIG="Device tracking has not been configured in this User Pool",e.AUTOSIGNIN_ERROR="Please use your credentials to sign in",e.OAUTH_ERROR="Couldn't finish OAuth flow, check your User Pool HostedUI settings"})(un||(un={}));var Oe;(function(e){e.SignInException="SignInException",e.OAuthSignInError="OAuthSignInException"})(Oe||(Oe={}));class I extends P{constructor(t){super(t),this.constructor=I,Object.setPrototypeOf(this,I.prototype)}}function U(e,t){const{message:n,recoverySuggestion:o}=Ds[t];if(!e)throw new I({name:t,message:n,recoverySuggestion:o})}function A(e){const t=e==null?void 0:e.split("_")[0];if(!e||e.indexOf("_")<0||!t||typeof t!="string")throw new I({name:"InvalidUserPoolId",message:"Invalid user pool id provided."});return t}function rt(e){if(!e||!e.includes(":"))throw new I({name:"InvalidIdentityPoolIdException",message:"Invalid identity pool id provided.",recoverySuggestion:"Make sure a valid identityPoolId is given in the config."});return e.split(":")[0]}function ln(e){return Object.entries(e).map(([t,n])=>({Name:t,Value:n}))}function Fs(e){const t={};return e==null||e.forEach(n=>{n.Name&&(t[n.Name]=n.Value)}),t}var hn;(function(e){e.ConcurrentModificationException="ConcurrentModificationException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.SoftwareTokenMFANotFoundException="SoftwareTokenMFANotFoundException"})(hn||(hn={}));var fn;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(fn||(fn={}));var pn;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UsernameExistsException="UsernameExistsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(pn||(pn={}));var gn;(function(e){e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyFailedAttemptsException="TooManyFailedAttemptsException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(gn||(gn={}));var En;(function(e){e.AliasExistsException="AliasExistsException",e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyFailedAttemptsException="TooManyFailedAttemptsException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotFoundException="UserNotFoundException"})(En||(En={}));var mn;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(mn||(mn={}));var In;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(In||(In={}));var yn;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(yn||(yn={}));var Sn;(function(e){e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotFoundException="UserNotFoundException"})(Sn||(Sn={}));var wn;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(wn||(wn={}));var xn;(function(e){e.ExternalServiceException="ExternalServiceException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceConflictException="ResourceConflictException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException"})(xn||(xn={}));var vn;(function(e){e.ExternalServiceException="ExternalServiceException",e.InternalErrorException="InternalErrorException",e.InvalidIdentityPoolConfigurationException="InvalidIdentityPoolConfigurationException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceConflictException="ResourceConflictException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException"})(vn||(vn={}));var Cn;(function(e){e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(Cn||(Cn={}));var Tn;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException"})(Tn||(Tn={}));var Le;(function(e){e.PasswordResetRequiredException="PasswordResetRequiredException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(Le||(Le={}));var Rn;(function(e){e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotFoundException="UserNotFoundException"})(Rn||(Rn={}));var An;(function(e){e.AliasExistsException="AliasExistsException",e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.MFAMethodNotFoundException="MFAMethodNotFoundException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.SoftwareTokenMFANotFoundException="SoftwareTokenMFANotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(An||(An={}));var _n;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(_n||(_n={}));var Nn;(function(e){e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UsernameExistsException="UsernameExistsException"})(Nn||(Nn={}));var Pn;(function(e){e.AliasExistsException="AliasExistsException",e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(Pn||(Pn={}));var Un;(function(e){e.CodeMismatchException="CodeMismatchException",e.EnableSoftwareTokenMFAException="EnableSoftwareTokenMFAException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.SoftwareTokenMFANotFoundException="SoftwareTokenMFANotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(Un||(Un={}));var bn;(function(e){e.AliasExistsException="AliasExistsException",e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(bn||(bn={}));var Mn;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(Mn||(Mn={}));var Dn;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(Dn||(Dn={}));const He="UserUnAuthenticatedException",Os="UserAlreadyAuthenticatedException",Ls="DeviceMetadataNotFoundException",ks="InvalidRedirectException",Ks="InvalidAppSchemeException",Bs="InvalidPreferredRedirectUrlException",qs=new I({name:ks,message:"signInRedirect or signOutRedirect had an invalid format or was not found.",recoverySuggestion:"Please make sure the signIn/Out redirect in your oauth config is valid."});new I({name:Ks,message:"A valid non-http app scheme was not found in the config.",recoverySuggestion:"Please make sure a valid custom app scheme is present in the config."});new I({name:Bs,message:"The given preferredRedirectUrl does not match any items in the redirectSignOutUrls array from the config.",recoverySuggestion:"Please make sure a matching preferredRedirectUrl is provided."});const Vs="InvalidOriginException",Ws=new I({name:Vs,message:"redirect is coming from a different origin. The oauth flow needs to be initiated from the same origin",recoverySuggestion:"Please call signInWithRedirect from the same origin."}),Hs="OAuthSignOutException",$s="TokenRefreshException",zs="UnexpectedSignInInterruptionException";function fo(e){if(!e||!e.accessToken)throw new I({name:He,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."})}function Gs(e){if(!e||!e.idToken)throw new I({name:He,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."})}const js=new I({name:$s,message:`Token refresh is not supported when authenticated with the 'implicit grant' (token) oauth flow. 
	Please change your oauth configuration to use 'code grant' flow.`,recoverySuggestion:`Please logout and change your Amplify configuration to use "code grant" flow. 
	E.g { responseType: 'code' }`}),Ys=new I({name:He,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."});function po(e){if(Zs(e))throw js;if(!Xs(e))throw Ys}function go(e){if(!e||!e.deviceKey||!e.deviceGroupKey||!e.randomPassword)throw new I({name:Ls,message:"Either deviceKey, deviceGroupKey or secretPassword were not found during the sign-in process.",recoverySuggestion:"Make sure to not clear storage after calling the signIn API."})}const Js={inflightOAuth:"inflightOAuth",oauthSignIn:"oauthSignIn",oauthPKCE:"oauthPKCE",oauthState:"oauthState"};function Eo(e){return(e==null?void 0:e.accessToken)||(e==null?void 0:e.idToken)}function Xs(e){return Eo(e)&&(e==null?void 0:e.refreshToken)}function Zs(e){return Eo(e)&&!(e!=null&&e.refreshToken)}const Qs=async e=>{var c,a;const t=(c=e.getConfig().Auth)==null?void 0:c.Cognito;w(t);const n=await e.Auth.getTokens({forceRefresh:!1});fo(n);const{"cognito:username":o,sub:i}=((a=n.idToken)==null?void 0:a.payload)??{},s={username:o,userId:i},r=er(n);return r&&(s.signInDetails=r),s};function er(e){return e==null?void 0:e.signInDetails}const mo=async()=>Qs(v),$=(e,t)=>Be({category:it.Auth,action:e,...t}),z=e=>(t,n)=>{const o=tr(e),i=JSON.stringify(t);return nr(n,o,i)},tr=e=>({"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityProviderService.${e}`}),nr=({url:e},t,n)=>({headers:t,url:e,body:n,method:"POST"});function ue(e){if(!e||e.name==="Error"||e instanceof TypeError)throw new I({name:me.Unknown,message:"An unknown error has occurred.",underlyingError:e})}const G=()=>async e=>{if(e.statusCode>=300){const t=await ye(e);throw ue(t),new I({name:t.name,message:t.message})}return Ve(e)},or=()=>(e,t)=>async function(o){return o.headers["cache-control"]="no-store",e(o)},j=ft(io,[or]),Io="cognito-idp",Y={service:Io,retryDecider:ro(ye),computeDelay:so,userAgentValue:Be(),cache:"no-store"},Se=e=>L(j,z("InitiateAuth"),G(),{...Y,...e}),Et=e=>L(j,z("RespondToAuthChallenge"),G(),{...Y,...e}),ir=e=>L(j,z("AssociateSoftwareToken"),G(),{...Y,...e}),sr=e=>L(j,z("ConfirmDevice"),G(),{...Y,...e}),rr=({region:e})=>({url:new We(`https://${Io}.${e}.${oo(e)}`)}),_=({endpointOverride:e})=>t=>e?{url:new We(e)}:rr(t),ar=(e,t)=>{switch(t.type){case"SET_SIGN_IN_SESSION":return{...e,signInSession:t.value};case"SET_SIGN_IN_STATE":return{...t.value};case"SET_CHALLENGE_NAME":return{...e,challengeName:t.value};case"SET_USERNAME":return{...e,username:t.value};case"SET_INITIAL_STATE":return yo();default:return e}};function yo(){return{username:void 0,challengeName:void 0,signInSession:void 0}}const cr=e=>{let t=e(yo(),{type:"SET_INITIAL_STATE"});return{getState:()=>t,dispatch:n=>{t=e(t,n)}}},ae=cr(ar);function $e(e){ae.dispatch({type:"SET_SIGN_IN_STATE",value:e})}function Z(){ae.dispatch({type:"SET_INITIAL_STATE"})}const Pe={convert(e){return new TextEncoder().encode(e)}};function f(e,t){e!=null&&this.fromString(e,t)}function R(){return new f(null,null)}let X;const dr=0xdeadbeefcafe,Fn=(dr&16777215)===15715070;function ur(e,t,n,o,i,s){for(;--s>=0;){const r=t*this[e++]+n[o]+i;i=Math.floor(r/67108864),n[o++]=r&67108863}return i}function lr(e,t,n,o,i,s){const r=t&32767,c=t>>15;for(;--s>=0;){let a=this[e]&32767;const d=this[e++]>>15,u=c*a+d*r;a=r*a+((u&32767)<<15)+n[o]+(i&1073741823),i=(a>>>30)+(u>>>15)+c*d+(i>>>30),n[o++]=a&1073741823}return i}function hr(e,t,n,o,i,s){const r=t&16383,c=t>>14;for(;--s>=0;){let a=this[e]&16383;const d=this[e++]>>14,u=c*a+d*r;a=r*a+((u&16383)<<14)+n[o]+i,i=(a>>28)+(u>>14)+c*d,n[o++]=a&268435455}return i}const On=typeof navigator<"u";On&&Fn&&navigator.appName==="Microsoft Internet Explorer"?(f.prototype.am=lr,X=30):On&&Fn&&navigator.appName!=="Netscape"?(f.prototype.am=ur,X=26):(f.prototype.am=hr,X=28);f.prototype.DB=X;f.prototype.DM=(1<<X)-1;f.prototype.DV=1<<X;const mt=52;f.prototype.FV=Math.pow(2,mt);f.prototype.F1=mt-X;f.prototype.F2=2*X-mt;const fr="0123456789abcdefghijklmnopqrstuvwxyz",ze=[];let le,M;le=48;for(M=0;M<=9;++M)ze[le++]=M;le=97;for(M=10;M<36;++M)ze[le++]=M;le=65;for(M=10;M<36;++M)ze[le++]=M;function Ln(e){return fr.charAt(e)}function pr(e,t){const n=ze[e.charCodeAt(t)];return n??-1}function gr(e){for(let t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s}function Er(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0}function It(e){const t=R();return t.fromInt(e),t}function mr(e,t){let n;if(t===16)n=4;else if(t===8)n=3;else if(t===2)n=1;else if(t===32)n=5;else if(t===4)n=2;else throw new Error("Only radix 2, 4, 8, 16, 32 are supported");this.t=0,this.s=0;let o=e.length,i=!1,s=0;for(;--o>=0;){const r=pr(e,o);if(r<0){e.charAt(o)==="-"&&(i=!0);continue}i=!1,s===0?this[this.t++]=r:s+n>this.DB?(this[this.t-1]|=(r&(1<<this.DB-s)-1)<<s,this[this.t++]=r>>this.DB-s):this[this.t-1]|=r<<s,s+=n,s>=this.DB&&(s-=this.DB)}this.clamp(),i&&f.ZERO.subTo(this,this)}function Ir(){const e=this.s&this.DM;for(;this.t>0&&this[this.t-1]==e;)--this.t}function yr(e){if(this.s<0)return"-"+this.negate().toString(e);let t;if(e==16)t=4;else if(e===8)t=3;else if(e===2)t=1;else if(e===32)t=5;else if(e===4)t=2;else throw new Error("Only radix 2, 4, 8, 16, 32 are supported");const n=(1<<t)-1;let o,i=!1,s="",r=this.t,c=this.DB-r*this.DB%t;if(r-- >0)for(c<this.DB&&(o=this[r]>>c)>0&&(i=!0,s=Ln(o));r>=0;)c<t?(o=(this[r]&(1<<c)-1)<<t-c,o|=this[--r]>>(c+=this.DB-t)):(o=this[r]>>(c-=t)&n,c<=0&&(c+=this.DB,--r)),o>0&&(i=!0),i&&(s+=Ln(o));return i?s:"0"}function Sr(){const e=R();return f.ZERO.subTo(this,e),e}function wr(){return this.s<0?this.negate():this}function xr(e){let t=this.s-e.s;if(t!=0)return t;let n=this.t;if(t=n-e.t,t!=0)return this.s<0?-t:t;for(;--n>=0;)if((t=this[n]-e[n])!=0)return t;return 0}function yt(e){let t=1,n;return(n=e>>>16)!==0&&(e=n,t+=16),(n=e>>8)!==0&&(e=n,t+=8),(n=e>>4)!==0&&(e=n,t+=4),(n=e>>2)!==0&&(e=n,t+=2),(n=e>>1)!==0&&(e=n,t+=1),t}function vr(){return this.t<=0?0:this.DB*(this.t-1)+yt(this[this.t-1]^this.s&this.DM)}function Cr(e,t){let n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s}function Tr(e,t){for(let n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s}function Rr(e,t){const n=e%this.DB,o=this.DB-n,i=(1<<o)-1,s=Math.floor(e/this.DB);let r=this.s<<n&this.DM,c;for(c=this.t-1;c>=0;--c)t[c+s+1]=this[c]>>o|r,r=(this[c]&i)<<n;for(c=s-1;c>=0;--c)t[c]=0;t[s]=r,t.t=this.t+s+1,t.s=this.s,t.clamp()}function Ar(e,t){t.s=this.s;const n=Math.floor(e/this.DB);if(n>=this.t){t.t=0;return}const o=e%this.DB,i=this.DB-o,s=(1<<o)-1;t[0]=this[n]>>o;for(let r=n+1;r<this.t;++r)t[r-n-1]|=(this[r]&s)<<i,t[r-n]=this[r]>>o;o>0&&(t[this.t-n-1]|=(this.s&s)<<i),t.t=this.t-n,t.clamp()}function _r(e,t){let n=0,o=0;const i=Math.min(e.t,this.t);for(;n<i;)o+=this[n]-e[n],t[n++]=o&this.DM,o>>=this.DB;if(e.t<this.t){for(o-=e.s;n<this.t;)o+=this[n],t[n++]=o&this.DM,o>>=this.DB;o+=this.s}else{for(o+=this.s;n<e.t;)o-=e[n],t[n++]=o&this.DM,o>>=this.DB;o-=e.s}t.s=o<0?-1:0,o<-1?t[n++]=this.DV+o:o>0&&(t[n++]=o),t.t=n,t.clamp()}function Nr(e,t){const n=this.abs(),o=e.abs();let i=n.t;for(t.t=i+o.t;--i>=0;)t[i]=0;for(i=0;i<o.t;++i)t[i+n.t]=n.am(0,o[i],t,i,0,n.t);t.s=0,t.clamp(),this.s!==e.s&&f.ZERO.subTo(t,t)}function Pr(e){const t=this.abs();let n=e.t=2*t.t;for(;--n>=0;)e[n]=0;for(n=0;n<t.t-1;++n){const o=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,o,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()}function Ur(e,t,n){const o=e.abs();if(o.t<=0)return;const i=this.abs();if(i.t<o.t){t!=null&&t.fromInt(0),n!=null&&this.copyTo(n);return}n===null&&(n=R());const s=R(),r=this.s,c=e.s,a=this.DB-yt(o[o.t-1]);a>0?(o.lShiftTo(a,s),i.lShiftTo(a,n)):(o.copyTo(s),i.copyTo(n));const d=s.t,u=s[d-1];if(u===0)return;const l=u*(1<<this.F1)+(d>1?s[d-2]>>this.F2:0),h=this.FV/l,p=(1<<this.F1)/l,g=1<<this.F2;let m=n.t,E=m-d;const S=t===null?R():t;for(s.dlShiftTo(E,S),n.compareTo(S)>=0&&(n[n.t++]=1,n.subTo(S,n)),f.ONE.dlShiftTo(d,S),S.subTo(s,s);s.t<d;)s[s.t++]=0;for(;--E>=0;){let k=n[--m]===u?this.DM:Math.floor(n[m]*h+(n[m-1]+g)*p);if((n[m]+=s.am(0,k,n,E,0,d))<k)for(s.dlShiftTo(E,S),n.subTo(S,n);n[m]<--k;)n.subTo(S,n)}t!==null&&(n.drShiftTo(d,t),r!==c&&f.ZERO.subTo(t,t)),n.t=d,n.clamp(),a>0&&n.rShiftTo(a,n),r<0&&f.ZERO.subTo(n,n)}function br(e){const t=R();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(f.ZERO)>0&&e.subTo(t,t),t}function Mr(){if(this.t<1)return 0;const e=this[0];if(!(e&1))return 0;let t=e&3;return t=t*(2-(e&15)*t)&15,t=t*(2-(e&255)*t)&255,t=t*(2-((e&65535)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function Dr(e){return this.compareTo(e)===0}function Fr(e,t){let n=0,o=0;const i=Math.min(e.t,this.t);for(;n<i;)o+=this[n]+e[n],t[n++]=o&this.DM,o>>=this.DB;if(e.t<this.t){for(o+=e.s;n<this.t;)o+=this[n],t[n++]=o&this.DM,o>>=this.DB;o+=this.s}else{for(o+=this.s;n<e.t;)o+=e[n],t[n++]=o&this.DM,o>>=this.DB;o+=e.s}t.s=o<0?-1:0,o>0?t[n++]=o:o<-1&&(t[n++]=this.DV+o),t.t=n,t.clamp()}function Or(e){const t=R();return this.addTo(e,t),t}function Lr(e){const t=R();return this.subTo(e,t),t}function kr(e){const t=R();return this.multiplyTo(e,t),t}function Kr(e){const t=R();return this.divRemTo(e,t,null),t}function he(e){this.m=e,this.mp=e.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function Br(e){const t=R();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(f.ZERO)>0&&this.m.subTo(t,t),t}function qr(e){const t=R();return e.copyTo(t),this.reduce(t),t}function Vr(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(let t=0;t<this.m.t;++t){let n=e[t]&32767;const o=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(n=t+this.m.t,e[n]+=this.m.am(0,o,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function Wr(e,t){e.squareTo(t),this.reduce(t)}function Hr(e,t,n){e.multiplyTo(t,n),this.reduce(n)}he.prototype.convert=Br;he.prototype.revert=qr;he.prototype.reduce=Vr;he.prototype.mulTo=Hr;he.prototype.sqrTo=Wr;function $r(e,t,n){let o=e.bitLength(),i,s=It(1);const r=new he(t);if(o<=0)return s;o<18?i=1:o<48?i=3:o<144?i=4:o<768?i=5:i=6;const c=[];let a=3;const d=i-1,u=(1<<i)-1;if(c[1]=r.convert(this),i>1){const S=R();for(r.sqrTo(c[1],S);a<=u;)c[a]=R(),r.mulTo(S,c[a-2],c[a]),a+=2}let l=e.t-1,h,p=!0,g=R(),m;for(o=yt(e[l])-1;l>=0;){for(o>=d?h=e[l]>>o-d&u:(h=(e[l]&(1<<o+1)-1)<<d-o,l>0&&(h|=e[l-1]>>this.DB+o-d)),a=i;!(h&1);)h>>=1,--a;if((o-=a)<0&&(o+=this.DB,--l),p)c[h].copyTo(s),p=!1;else{for(;a>1;)r.sqrTo(s,g),r.sqrTo(g,s),a-=2;a>0?r.sqrTo(s,g):(m=s,s=g,g=m),r.mulTo(g,c[h],s)}for(;l>=0&&!(e[l]&1<<o);)r.sqrTo(s,g),m=s,s=g,g=m,--o<0&&(o=this.DB-1,--l)}const E=r.revert(s);return n(null,E),E}f.prototype.copyTo=gr;f.prototype.fromInt=Er;f.prototype.fromString=mr;f.prototype.clamp=Ir;f.prototype.dlShiftTo=Cr;f.prototype.drShiftTo=Tr;f.prototype.lShiftTo=Rr;f.prototype.rShiftTo=Ar;f.prototype.subTo=_r;f.prototype.multiplyTo=Nr;f.prototype.squareTo=Pr;f.prototype.divRemTo=Ur;f.prototype.invDigit=Mr;f.prototype.addTo=Fr;f.prototype.toString=yr;f.prototype.negate=Sr;f.prototype.abs=wr;f.prototype.compareTo=xr;f.prototype.bitLength=vr;f.prototype.mod=br;f.prototype.equals=Dr;f.prototype.add=Or;f.prototype.subtract=Lr;f.prototype.multiply=kr;f.prototype.divide=Kr;f.prototype.modPow=$r;f.ZERO=It(0);f.ONE=It(1);const zr=async({a:e,g:t,k:n,x:o,B:i,N:s,U:r})=>new Promise((c,a)=>{t.modPow(o,s,(d,u)=>{if(d){a(d);return}i.subtract(n.multiply(u)).modPow(e.add(r.multiply(o)),s,(l,h)=>{if(l){a(l);return}c(h.mod(s))})})}),Gr="FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",So={},at={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),So[e]=t,at[t]=e}const ce=e=>{if(e.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const t=new Uint8Array(e.length/2);for(let n=0;n<e.length;n+=2){const o=e.slice(n,n+2).toLowerCase();if(o in at)t[n/2]=at[o];else throw new Error(`Cannot decode unrecognized sequence ${o} as hexadecimal`)}return t},St=e=>{let t="";for(let n=0;n<e.byteLength;n++)t+=So[e[n]];return t},ct=e=>{const t=new Me;t.update(e);const n=t.digestSync(),o=St(n);return new Array(64-o.length).join("0")+o},Ue=e=>ct(ce(e)),jr=/^[89a-f]/i,H=e=>{if(!(e instanceof f))throw new Error("Not a BigInteger");const t=e.compareTo(f.ZERO)<0;let n=e.abs().toString(16);if(n=n.length%2!==0?`0${n}`:n,n=jr.test(n)?`00${n}`:n,t){const o=n.split("").map(s=>{const r=~parseInt(s,16)&15;return"0123456789ABCDEF".charAt(r)}).join("");n=new f(o,16).add(f.ONE).toString(16),n.toUpperCase().startsWith("FF8")&&(n=n.substring(2))}return n},Yr=({A:e,B:t})=>{const n=new f(Ue(H(e)+H(t)),16);if(n.equals(f.ZERO))throw new Error("U cannot be zero.");return n},Jr=(e,t,n)=>{const o=new Me(t);o.update(e);const i=o.digestSync(),s=new Me(i);return s.update(n),s.digestSync().slice(0,16)},wt=e=>{const t=new gt().random(e).toString();return ce(t)},Xr=()=>Fe.convert(wt(40));class Zr{constructor({userPoolName:t,a:n,g:o,A:i,N:s}){this.encoder=Pe,this.userPoolName=t,this.a=n,this.g=o,this.A=i,this.N=s,this.k=new f(Ue(`${H(s)}${H(o)}`),16)}getRandomPassword(){if(!this.randomPassword)throw new I({name:"EmptyBigIntegerRandomPassword",message:"random password is empty"});return this.randomPassword}getSaltToHashDevices(){if(!this.saltToHashDevices)throw new I({name:"EmptyBigIntegersaltToHashDevices",message:"saltToHashDevices is empty"});return this.saltToHashDevices}getVerifierDevices(){if(!this.verifierDevices)throw new I({name:"EmptyBigIntegerVerifierDevices",message:"verifyDevices is empty"});return this.verifierDevices}async generateHashDevice(t,n){this.randomPassword=Xr();const o=`${t}${n}:${this.randomPassword}`,i=ct(o),s=St(wt(16));return this.saltToHashDevices=H(new f(s,16)),new Promise((r,c)=>{this.g.modPow(new f(Ue(this.saltToHashDevices+i),16),this.N,(a,d)=>{if(a){c(a);return}this.verifierDevices=H(d),r()})})}async getPasswordAuthenticationKey({username:t,password:n,serverBValue:o,salt:i}){if(o.mod(this.N).equals(f.ZERO))throw new Error("B cannot be zero.");const s=Yr({A:this.A,B:o}),r=`${this.userPoolName}${t}:${n}`,c=ct(r),a=new f(Ue(H(i)+c),16),d=await zr({a:this.a,g:this.g,k:this.k,x:a,B:o,N:this.N,U:s}),u=this.encoder.convert("Caldera Derived Key"),l=this.encoder.convert(""),h=new Uint8Array(u.byteLength+l.byteLength);return h.set(u,0),h.set(l,u.byteLength),Jr(ce(H(d)),ce(H(s)),h)}}const Qr=async({a:e,g:t,N:n})=>new Promise((o,i)=>{t.modPow(e,n,(s,r)=>{if(s){i(s);return}if(r.mod(n).equals(f.ZERO)){i(new Error("Illegal parameter. A mod N cannot be 0."));return}o(r)})}),Ge=async e=>{const t=new f(Gr,16),n=new f("2",16),o=ea(),i=await Qr({a:o,g:n,N:t});return new Zr({userPoolName:e,a:o,g:n,A:i,N:t})},ea=()=>{const e=St(wt(128));return new f(e,16)},ta=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],na=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wo=()=>{const e=new Date,t=na[e.getUTCDay()],n=ta[e.getUTCMonth()],o=e.getUTCDate();let i=e.getUTCHours();i<10&&(i=`0${i}`);let s=e.getUTCMinutes();s<10&&(s=`0${s}`);let r=e.getUTCSeconds();r<10&&(r=`0${r}`);const c=e.getUTCFullYear();return`${t} ${n} ${o} ${i}:${s}:${r} UTC ${c}`},xo=({userPoolName:e,username:t,challengeParameters:n,dateNow:o,hkdf:i})=>{const s=Pe.convert(e),r=Pe.convert(t),c=oa(n.SECRET_BLOCK),a=Pe.convert(o),d=new Uint8Array(s.byteLength+r.byteLength+c.byteLength+a.byteLength);d.set(s,0),d.set(r,s.byteLength),d.set(c,s.byteLength+r.byteLength),d.set(a,s.byteLength+r.byteLength+c.byteLength);const u=new Me(i);u.update(d);const l=u.digestSync();return Fe.convert(l)},oa=e=>{const t="=".repeat((4-e.length%4)%4),n=(e+t).replace(/-/g,"+").replace(/_/g,"/"),o=Gn.convert(n),i=new Uint8Array(o.length);for(let s=0;s<o.length;++s)i[s]=o.charCodeAt(s);return i};function W({username:e,userPoolId:t,userPoolClientId:n}){if(typeof window>"u")return;const o=window.AmazonCognitoAdvancedSecurityData;if(typeof o>"u")return;const i=o.getData(e,t,n);return i?{EncodedData:i}:{}}const kn="userAttributes.";async function ia(e,t,n,o,i){var m,E;const{userPoolClientId:s,userPoolId:r,userPoolEndpoint:c}=o,a={USERNAME:e,PASSWORD:t},d=await i.getDeviceMetadata(e);d&&d.deviceKey&&(a.DEVICE_KEY=d.deviceKey);const u=W({username:e,userPoolId:r,userPoolClientId:s}),l={AuthFlow:"USER_PASSWORD_AUTH",AuthParameters:a,ClientMetadata:n,ClientId:s,UserContextData:u},p=await Se({endpointResolver:_({endpointOverride:c})})({region:A(r),userAgentValue:$(F.SignIn)},l),g=((m=p.ChallengeParameters)==null?void 0:m.USERNAME)??((E=p.ChallengeParameters)==null?void 0:E.USER_ID_FOR_SRP)??e;return Ze(g),p.ChallengeName==="DEVICE_SRP_AUTH"?xt({username:g,config:o,clientMetadata:n,session:p.Session,tokenOrchestrator:i}):p}async function sa(e,t,n,o,i){const{userPoolId:s,userPoolClientId:r,userPoolEndpoint:c}=o,a=(s==null?void 0:s.split("_")[1])||"",d=await Ge(a),u={USERNAME:e,SRP_A:d.A.toString(16)},l=W({username:e,userPoolId:s,userPoolClientId:r}),h={AuthFlow:"USER_SRP_AUTH",AuthParameters:u,ClientMetadata:n,ClientId:r,UserContextData:l},g=await Se({endpointResolver:_({endpointOverride:c})})({region:A(s),userAgentValue:$(F.SignIn)},h),{ChallengeParameters:m,Session:E}=g,S=(m==null?void 0:m.USERNAME)??e;return Ze(S),Xe(vo,[t,m,n,E,d,o,i],S,i)}async function ra(e,t,n,o){var g;const{userPoolClientId:i,userPoolId:s,userPoolEndpoint:r}=n,c={USERNAME:e},a=await o.getDeviceMetadata(e);a&&a.deviceKey&&(c.DEVICE_KEY=a.deviceKey);const d=W({username:e,userPoolId:s,userPoolClientId:i}),u={AuthFlow:"CUSTOM_AUTH",AuthParameters:c,ClientMetadata:t,ClientId:i,UserContextData:d},h=await Se({endpointResolver:_({endpointOverride:r})})({region:A(s),userAgentValue:$(F.SignIn)},u),p=((g=h.ChallengeParameters)==null?void 0:g.USERNAME)??e;return Ze(p),h.ChallengeName==="DEVICE_SRP_AUTH"?xt({username:p,config:n,clientMetadata:t,session:h.Session,tokenOrchestrator:o}):h}async function aa(e,t,n,o,i){w(o);const{userPoolId:s,userPoolClientId:r,userPoolEndpoint:c}=o,a=(s==null?void 0:s.split("_")[1])||"",d=await Ge(a),u={USERNAME:e,SRP_A:d.A.toString(16),CHALLENGE_NAME:"SRP_A"},l=W({username:e,userPoolId:s,userPoolClientId:r}),h={AuthFlow:"CUSTOM_AUTH",AuthParameters:u,ClientMetadata:n,ClientId:r,UserContextData:l},p=Se({endpointResolver:_({endpointOverride:c})}),{ChallengeParameters:g,Session:m}=await p({region:A(s),userAgentValue:$(F.SignIn)},h),E=(g==null?void 0:g.USERNAME)??e;return Ze(E),Xe(vo,[t,g,n,m,d,o,i],E,i)}async function xt({username:e,config:t,clientMetadata:n,session:o,tokenOrchestrator:i}){const{userPoolId:s,userPoolEndpoint:r}=t,c=t.userPoolClientId,a=await(i==null?void 0:i.getDeviceMetadata(e));go(a);const d=await Ge(a.deviceGroupKey),u={USERNAME:e,SRP_A:d.A.toString(16),DEVICE_KEY:a.deviceKey},l={ChallengeName:"DEVICE_SRP_AUTH",ClientId:c,ChallengeResponses:u,ClientMetadata:n,Session:o},h=Et({endpointResolver:_({endpointOverride:r})}),{ChallengeParameters:p,Session:g}=await h({region:A(s)},l);return ca(e,p,n,g,d,t,i)}async function ca(e,t,n,o,i,{userPoolId:s,userPoolClientId:r,userPoolEndpoint:c},a){const d=await(a==null?void 0:a.getDeviceMetadata(e));go(d);const u=new f(t==null?void 0:t.SRP_B,16),l=new f(t==null?void 0:t.SALT,16),{deviceKey:h}=d,{deviceGroupKey:p}=d,g=await i.getPasswordAuthenticationKey({username:d.deviceKey,password:d.randomPassword,serverBValue:u,salt:l}),m=wo(),E={USERNAME:(t==null?void 0:t.USERNAME)??e,PASSWORD_CLAIM_SECRET_BLOCK:t==null?void 0:t.SECRET_BLOCK,TIMESTAMP:m,PASSWORD_CLAIM_SIGNATURE:xo({username:h,userPoolName:p,challengeParameters:t,dateNow:m,hkdf:g}),DEVICE_KEY:h},S=W({username:e,userPoolId:s,userPoolClientId:r}),k={ChallengeName:"DEVICE_PASSWORD_VERIFIER",ClientId:r,ChallengeResponses:E,Session:o,ClientMetadata:n,UserContextData:S};return Et({endpointResolver:_({endpointOverride:c})})({region:A(s)},k)}async function vo(e,t,n,o,i,s,r){const{userPoolId:c,userPoolClientId:a,userPoolEndpoint:d}=s,u=(c==null?void 0:c.split("_")[1])||"",l=new f(t==null?void 0:t.SRP_B,16),h=new f(t==null?void 0:t.SALT,16),p=t==null?void 0:t.USER_ID_FOR_SRP;if(!p)throw new I({name:"EmptyUserIdForSRPException",message:"USER_ID_FOR_SRP was not found in challengeParameters"});const g=await i.getPasswordAuthenticationKey({username:p,password:e,serverBValue:l,salt:h}),m=wo(),E={USERNAME:p,PASSWORD_CLAIM_SECRET_BLOCK:t==null?void 0:t.SECRET_BLOCK,TIMESTAMP:m,PASSWORD_CLAIM_SIGNATURE:xo({username:p,userPoolName:u,challengeParameters:t,dateNow:m,hkdf:g})},S=await r.getDeviceMetadata(p);S&&S.deviceKey&&(E.DEVICE_KEY=S.deviceKey);const k=W({username:p,userPoolId:c,userPoolClientId:a}),we={ChallengeName:"PASSWORD_VERIFIER",ChallengeResponses:E,ClientMetadata:n,Session:o,ClientId:a,UserContextData:k},ie=await Et({endpointResolver:_({endpointOverride:d})})({region:A(c)},we);return ie.ChallengeName==="DEVICE_SRP_AUTH"?xt({username:p,config:s,clientMetadata:n,session:ie.Session,tokenOrchestrator:r}):ie}async function je(e){var i;const{challengeName:t,challengeParameters:n}=e,o=(i=v.getConfig().Auth)==null?void 0:i.Cognito;switch(w(o),t){case"CUSTOM_CHALLENGE":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_CUSTOM_CHALLENGE",additionalInfo:n}};case"MFA_SETUP":{const{signInSession:s,username:r}=ae.getState();if(!ha(n,"TOTP"))throw new I({name:Oe.SignInException,message:`Cannot initiate MFA setup from available types: ${dt(ut(n.MFAS_CAN_SETUP))}`});const c=ir({endpointResolver:_({endpointOverride:o.userPoolEndpoint})}),{Session:a,SecretCode:d}=await c({region:A(o.userPoolId)},{Session:s});return ae.dispatch({type:"SET_SIGN_IN_SESSION",value:a}),{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_TOTP_SETUP",totpSetupDetails:da(d,r)}}}case"NEW_PASSWORD_REQUIRED":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_NEW_PASSWORD_REQUIRED",missingAttributes:ua(n.requiredAttributes)}};case"SELECT_MFA_TYPE":return{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_MFA_SELECTION",allowedMFATypes:dt(ut(n.MFAS_CAN_CHOOSE))}};case"SMS_MFA":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_SMS_CODE",codeDeliveryDetails:{deliveryMedium:n.CODE_DELIVERY_DELIVERY_MEDIUM,destination:n.CODE_DELIVERY_DESTINATION}}};case"SOFTWARE_TOKEN_MFA":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_TOTP_CODE"}}}throw new I({name:Oe.SignInException,message:`An error occurred during the sign in process. ${t} challengeName returned by the underlying service was not addressed.`})}function da(e,t){return{sharedSecret:e,getSetupUri:(n,o)=>{const i=`otpauth://totp/${n}:${o??t}?secret=${e}&issuer=${n}`;return new We(i)}}}function Ye(e){if(e===Le.PasswordResetRequiredException)return{isSignedIn:!1,nextStep:{signInStep:"RESET_PASSWORD"}};if(e===Le.UserNotConfirmedException)return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_UP"}}}function ua(e){return e?JSON.parse(e).map(n=>n.includes(kn)?n.replace(kn,""):n):[]}function la(e){if(e==="SMS_MFA")return"SMS";if(e==="SOFTWARE_TOKEN_MFA")return"TOTP"}function dt(e){if(e)return e.map(la).filter(Boolean)}function ut(e){return e?JSON.parse(e):[]}function ha(e,t){const{MFAS_CAN_SETUP:n}=e,o=dt(ut(n));return o?o.includes(t):!1}async function fa(){let e;try{e=await mo()}catch{}if(e&&e.userId&&e.username)throw new I({name:Os,message:"There is already a signed in user.",recoverySuggestion:"Call signOut before calling signIn again."})}async function Je({userPoolId:e,userPoolEndpoint:t,newDeviceMetadata:n,accessToken:o}){if(!n)return;const i=e.split("_")[1]||"",s=await Ge(i),r=n==null?void 0:n.DeviceKey,c=n==null?void 0:n.DeviceGroupKey;try{await s.generateHashDevice(c??"",r??"")}catch{return}const a={Salt:Fe.convert(ce(s.getSaltToHashDevices())),PasswordVerifier:Fe.convert(ce(s.getVerifierDevices()))},d=s.getRandomPassword();try{return await sr({endpointResolver:_({endpointOverride:t})})({region:A(e)},{AccessToken:o,DeviceName:await Ps(),DeviceKey:n==null?void 0:n.DeviceKey,DeviceSecretVerifierConfig:a}),{deviceKey:r,deviceGroupKey:c,randomPassword:d}}catch{return}}async function Xe(e,t,n,o){try{return await e(...t)}catch(i){if(i instanceof I&&i.name==="ResourceNotFoundException"&&i.message.includes("Device does not exist."))return await o.clearDeviceMetadata(n),e(...t);throw i}}function Ze(e){const{dispatch:t}=ae;t({type:"SET_USERNAME",value:e})}function Qe(e){return ae.getState().username??e}const pa=async({tokens:e,authConfig:t,username:n})=>{var E;w(t==null?void 0:t.Cognito);const{userPoolId:o,userPoolClientId:i,userPoolEndpoint:s}=t.Cognito,r=A(o);po(e);const c=e.refreshToken,a={REFRESH_TOKEN:c};(E=e.deviceMetadata)!=null&&E.deviceKey&&(a.DEVICE_KEY=e.deviceMetadata.deviceKey);const d=W({username:n,userPoolId:o,userPoolClientId:i}),u=Se({endpointResolver:_({endpointOverride:s})}),{AuthenticationResult:l}=await u({region:r},{ClientId:i,AuthFlow:"REFRESH_TOKEN_AUTH",AuthParameters:a,UserContextData:d}),h=oe((l==null?void 0:l.AccessToken)??""),p=l!=null&&l.IdToken?oe(l.IdToken):void 0,{iat:g}=h.payload;if(!g)throw new I({name:"iatNotFoundException",message:"iat not found in access token"});const m=g*1e3-new Date().getTime();return{accessToken:h,idToken:p,clockDrift:m,refreshToken:c,username:n}},ga=Ns(pa),Ea={accessToken:"accessToken",idToken:"idToken",oidcProvider:"oidcProvider",clockDrift:"clockDrift",refreshToken:"refreshToken",deviceKey:"deviceKey",randomPasswordKey:"randomPasswordKey",deviceGroupKey:"deviceGroupKey",signInDetails:"signInDetails",oauthMetadata:"oauthMetadata"};var ke;(function(e){e.InvalidAuthTokens="InvalidAuthTokens"})(ke||(ke={}));const ma={[ke.InvalidAuthTokens]:{message:"Invalid tokens.",recoverySuggestion:"Make sure the tokens are valid."}},Ia=$n(ma);class ya{constructor(){this.name="CognitoIdentityServiceProvider"}getKeyValueStorage(){if(!this.keyValueStorage)throw new I({name:"KeyValueStorageNotFoundException",message:"KeyValueStorage was not found in TokenStore"});return this.keyValueStorage}setKeyValueStorage(t){this.keyValueStorage=t}setAuthConfig(t){this.authConfig=t}async loadTokens(){try{const t=await this.getAuthKeys(),n=await this.getKeyValueStorage().getItem(t.accessToken);if(!n)throw new I({name:"NoSessionFoundException",message:"Auth session was not found. Make sure to call signIn."});const o=oe(n),i=await this.getKeyValueStorage().getItem(t.idToken),s=i?oe(i):void 0,r=await this.getKeyValueStorage().getItem(t.refreshToken)??void 0,c=await this.getKeyValueStorage().getItem(t.clockDrift)??"0",a=Number.parseInt(c),d=await this.getKeyValueStorage().getItem(t.signInDetails),u={accessToken:o,idToken:s,refreshToken:r,deviceMetadata:await this.getDeviceMetadata()??void 0,clockDrift:a,username:await this.getLastAuthUser()};return d&&(u.signInDetails=JSON.parse(d)),u}catch{return null}}async storeTokens(t){Ia(t!==void 0,ke.InvalidAuthTokens),await this.clearTokens();const n=t.username;await this.getKeyValueStorage().setItem(this.getLastAuthUserKey(),n);const o=await this.getAuthKeys();await this.getKeyValueStorage().setItem(o.accessToken,t.accessToken.toString()),t.idToken&&await this.getKeyValueStorage().setItem(o.idToken,t.idToken.toString()),t.refreshToken&&await this.getKeyValueStorage().setItem(o.refreshToken,t.refreshToken),t.deviceMetadata&&(t.deviceMetadata.deviceKey&&await this.getKeyValueStorage().setItem(o.deviceKey,t.deviceMetadata.deviceKey),t.deviceMetadata.deviceGroupKey&&await this.getKeyValueStorage().setItem(o.deviceGroupKey,t.deviceMetadata.deviceGroupKey),await this.getKeyValueStorage().setItem(o.randomPasswordKey,t.deviceMetadata.randomPassword)),t.signInDetails&&await this.getKeyValueStorage().setItem(o.signInDetails,JSON.stringify(t.signInDetails)),await this.getKeyValueStorage().setItem(o.clockDrift,`${t.clockDrift}`)}async clearTokens(){const t=await this.getAuthKeys();await Promise.all([this.getKeyValueStorage().removeItem(t.accessToken),this.getKeyValueStorage().removeItem(t.idToken),this.getKeyValueStorage().removeItem(t.clockDrift),this.getKeyValueStorage().removeItem(t.refreshToken),this.getKeyValueStorage().removeItem(t.signInDetails),this.getKeyValueStorage().removeItem(this.getLastAuthUserKey()),this.getKeyValueStorage().removeItem(t.oauthMetadata)])}async getDeviceMetadata(t){const n=await this.getAuthKeys(t),o=await this.getKeyValueStorage().getItem(n.deviceKey),i=await this.getKeyValueStorage().getItem(n.deviceGroupKey),s=await this.getKeyValueStorage().getItem(n.randomPasswordKey);return s&&i&&o?{deviceKey:o,deviceGroupKey:i,randomPassword:s}:null}async clearDeviceMetadata(t){const n=await this.getAuthKeys(t);await Promise.all([this.getKeyValueStorage().removeItem(n.deviceKey),this.getKeyValueStorage().removeItem(n.deviceGroupKey),this.getKeyValueStorage().removeItem(n.randomPasswordKey)])}async getAuthKeys(t){var o;w((o=this.authConfig)==null?void 0:o.Cognito);const n=t??await this.getLastAuthUser();return Sa(this.name,`${this.authConfig.Cognito.userPoolClientId}.${n}`)}getLastAuthUserKey(){var n;w((n=this.authConfig)==null?void 0:n.Cognito);const t=this.authConfig.Cognito.userPoolClientId;return`${this.name}.${t}.LastAuthUser`}async getLastAuthUser(){return await this.getKeyValueStorage().getItem(this.getLastAuthUserKey())??"username"}async setOAuthMetadata(t){const{oauthMetadata:n}=await this.getAuthKeys();await this.getKeyValueStorage().setItem(n,JSON.stringify(t))}async getOAuthMetadata(){const{oauthMetadata:t}=await this.getAuthKeys(),n=await this.getKeyValueStorage().getItem(t);return n&&JSON.parse(n)}}const Sa=(e,t)=>vt(Ea)(`${e}`,t);function vt(e){const t=Object.values({...e});return(n,o)=>t.reduce((i,s)=>({...i,[s]:`${n}.${o}.${s}`}),{})}const Kn="amplify-signin-with-hostedUI",K="CognitoIdentityServiceProvider";class Co{constructor(t){this.keyValueStorage=t}async clearOAuthInflightData(){w(this.cognitoConfig);const t=B(K,this.cognitoConfig.userPoolClientId);await Promise.all([this.keyValueStorage.removeItem(t.inflightOAuth),this.keyValueStorage.removeItem(t.oauthPKCE),this.keyValueStorage.removeItem(t.oauthState)])}async clearOAuthData(){w(this.cognitoConfig);const t=B(K,this.cognitoConfig.userPoolClientId);return await this.clearOAuthInflightData(),await this.keyValueStorage.removeItem(Kn),this.keyValueStorage.removeItem(t.oauthSignIn)}loadOAuthState(){w(this.cognitoConfig);const t=B(K,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.getItem(t.oauthState)}storeOAuthState(t){w(this.cognitoConfig);const n=B(K,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.setItem(n.oauthState,t)}loadPKCE(){w(this.cognitoConfig);const t=B(K,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.getItem(t.oauthPKCE)}storePKCE(t){w(this.cognitoConfig);const n=B(K,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.setItem(n.oauthPKCE,t)}setAuthConfig(t){this.cognitoConfig=t}async loadOAuthInFlight(){w(this.cognitoConfig);const t=B(K,this.cognitoConfig.userPoolClientId);return await this.keyValueStorage.getItem(t.inflightOAuth)==="true"}async storeOAuthInFlight(t){w(this.cognitoConfig);const n=B(K,this.cognitoConfig.userPoolClientId);await this.keyValueStorage.setItem(n.inflightOAuth,`${t}`)}async loadOAuthSignIn(){var s;w(this.cognitoConfig);const t=B(K,this.cognitoConfig.userPoolClientId),n=await this.keyValueStorage.getItem(Kn),[o,i]=((s=await this.keyValueStorage.getItem(t.oauthSignIn))==null?void 0:s.split(","))??[];return{isOAuthSignIn:o==="true"||n==="true",preferPrivateSession:i==="true"}}async storeOAuthSignIn(t,n=!1){w(this.cognitoConfig);const o=B(K,this.cognitoConfig.userPoolClientId);await this.keyValueStorage.setItem(o.oauthSignIn,`${t},${n}`)}}const B=(e,t)=>vt(Js)(e,t),Bn=new Co(re);class wa{constructor(){this.waitForInflightOAuth=Yi()?async()=>{if(await Bn.loadOAuthInFlight())return this.inflightPromise?this.inflightPromise:(this.inflightPromise=new Promise((t,n)=>{}),this.inflightPromise)}:async()=>{}}setAuthConfig(t){Bn.setAuthConfig(t.Cognito),this.authConfig=t}setTokenRefresher(t){this.tokenRefresher=t}setAuthTokenStore(t){this.tokenStore=t}getTokenStore(){if(!this.tokenStore)throw new I({name:"EmptyTokenStoreException",message:"TokenStore not set"});return this.tokenStore}getTokenRefresher(){if(!this.tokenRefresher)throw new I({name:"EmptyTokenRefresherException",message:"TokenRefresher not set"});return this.tokenRefresher}async getTokens(t){var r,c,a,d,u;let n;try{w((r=this.authConfig)==null?void 0:r.Cognito)}catch{return null}await this.waitForInflightOAuth(),this.inflightPromise=void 0,n=await this.getTokenStore().loadTokens();const o=await this.getTokenStore().getLastAuthUser();if(n===null)return null;const i=!!(n!=null&&n.idToken)&&Wt({expiresAt:(((a=(c=n.idToken)==null?void 0:c.payload)==null?void 0:a.exp)??0)*1e3,clockDrift:n.clockDrift??0}),s=Wt({expiresAt:(((u=(d=n.accessToken)==null?void 0:d.payload)==null?void 0:u.exp)??0)*1e3,clockDrift:n.clockDrift??0});return(t!=null&&t.forceRefresh||i||s)&&(n=await this.refreshTokens({tokens:n,username:o}),n===null)?null:{accessToken:n==null?void 0:n.accessToken,idToken:n==null?void 0:n.idToken,signInDetails:n==null?void 0:n.signInDetails}}async refreshTokens({tokens:t,username:n}){try{const{signInDetails:o}=t,i=await this.getTokenRefresher()({tokens:t,authConfig:this.authConfig,username:n});return i.signInDetails=o,await this.setTokens({tokens:i}),se.dispatch("auth",{event:"tokenRefresh"},"Auth",ne),i}catch(o){return this.handleErrors(o)}}handleErrors(t){if(ue(t),t.message!=="Network error"&&this.clearTokens(),se.dispatch("auth",{event:"tokenRefresh_failure",data:{error:t}},"Auth",ne),t.name.startsWith("NotAuthorizedException"))return null;throw t}async setTokens({tokens:t}){return this.getTokenStore().storeTokens(t)}async clearTokens(){return this.getTokenStore().clearTokens()}getDeviceMetadata(t){return this.getTokenStore().getDeviceMetadata(t)}clearDeviceMetadata(t){return this.getTokenStore().clearDeviceMetadata(t)}setOAuthMetadata(t){return this.getTokenStore().setOAuthMetadata(t)}getOAuthMetadata(){return this.getTokenStore().getOAuthMetadata()}}class xa{constructor(){this.authTokenStore=new ya,this.authTokenStore.setKeyValueStorage(re),this.tokenOrchestrator=new wa,this.tokenOrchestrator.setAuthTokenStore(this.authTokenStore),this.tokenOrchestrator.setTokenRefresher(ga)}getTokens({forceRefresh:t}={forceRefresh:!1}){return this.tokenOrchestrator.getTokens({forceRefresh:t})}setKeyValueStorage(t){this.authTokenStore.setKeyValueStorage(t)}setAuthConfig(t){this.authTokenStore.setAuthConfig(t),this.tokenOrchestrator.setAuthConfig(t)}}const pe=new xa,{tokenOrchestrator:O}=pe;async function et(e){if(e.AccessToken){const t=oe(e.AccessToken),n=(t.payload.iat||0)*1e3,o=new Date().getTime(),i=n>0?n-o:0;let s,r,c;e.RefreshToken&&(r=e.RefreshToken),e.IdToken&&(s=oe(e.IdToken)),e!=null&&e.NewDeviceMetadata&&(c=e.NewDeviceMetadata);const a={accessToken:t,idToken:s,refreshToken:r,clockDrift:i,deviceMetadata:c,username:e.username};e!=null&&e.signInDetails&&(a.signInDetails=e.signInDetails),await O.setTokens({tokens:a})}else throw new P({message:"Invalid tokens",name:"InvalidTokens",recoverySuggestion:"Check Cognito UserPool settings"})}const va="Unable to get user session following successful sign-in.",tt=async()=>{try{se.dispatch("auth",{event:"signedIn",data:await mo()},"Auth",ne)}catch(e){throw e.name===He?new I({name:zs,message:va,recoverySuggestion:"This most likely is due to auth tokens not being persisted. If you are using cookie store, please ensure cookies can be correctly set from your server."}):e}};async function Ca(e){var c;const t=(c=v.getConfig().Auth)==null?void 0:c.Cognito;w(t);const{username:n,password:o,options:i}=e,s={loginId:n,authFlowType:"CUSTOM_WITHOUT_SRP"},r=i==null?void 0:i.clientMetadata;U(!!n,y.EmptySignInUsername),U(!o,y.CustomAuthSignInPassword);try{const{ChallengeName:a,ChallengeParameters:d,AuthenticationResult:u,Session:l}=await Xe(ra,[n,r,t,O],n,O),h=Qe(n);return $e({signInSession:l,username:h,challengeName:a,signInDetails:s}),u?(Z(),await et({username:h,...u,NewDeviceMetadata:await Je({userPoolId:t.userPoolId,userPoolEndpoint:t.userPoolEndpoint,newDeviceMetadata:u.NewDeviceMetadata,accessToken:u.AccessToken}),signInDetails:s}),await tt(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):je({challengeName:a,challengeParameters:d})}catch(a){Z(),ue(a);const d=Ye(a.name);if(d)return d;throw a}}async function Ta(e){var c;const{username:t,password:n,options:o}=e,i={loginId:t,authFlowType:"CUSTOM_WITH_SRP"},s=(c=v.getConfig().Auth)==null?void 0:c.Cognito;w(s);const r=o==null?void 0:o.clientMetadata;U(!!t,y.EmptySignInUsername),U(!!n,y.EmptySignInPassword);try{const{ChallengeName:a,ChallengeParameters:d,AuthenticationResult:u,Session:l}=await aa(t,n,r,s,O),h=Qe(t);return $e({signInSession:l,username:h,challengeName:a,signInDetails:i}),u?(await et({username:h,...u,NewDeviceMetadata:await Je({userPoolId:s.userPoolId,userPoolEndpoint:s.userPoolEndpoint,newDeviceMetadata:u.NewDeviceMetadata,accessToken:u.AccessToken}),signInDetails:i}),Z(),await tt(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):je({challengeName:a,challengeParameters:d})}catch(a){Z(),ue(a);const d=Ye(a.name);if(d)return d;throw a}}async function qn(e){var r,c;const{username:t,password:n}=e,o=(r=v.getConfig().Auth)==null?void 0:r.Cognito,i={loginId:t,authFlowType:"USER_SRP_AUTH"};w(o);const s=(c=e.options)==null?void 0:c.clientMetadata;U(!!t,y.EmptySignInUsername),U(!!n,y.EmptySignInPassword);try{const{ChallengeName:a,ChallengeParameters:d,AuthenticationResult:u,Session:l}=await sa(t,n,s,o,O),h=Qe(t);return $e({signInSession:l,username:h,challengeName:a,signInDetails:i}),u?(Z(),await et({username:h,...u,NewDeviceMetadata:await Je({userPoolId:o.userPoolId,userPoolEndpoint:o.userPoolEndpoint,newDeviceMetadata:u.NewDeviceMetadata,accessToken:u.AccessToken}),signInDetails:i}),await tt(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):je({challengeName:a,challengeParameters:d})}catch(a){Z(),ue(a);const d=Ye(a.name);if(d)return d;throw a}}async function Ra(e){var c;const{username:t,password:n,options:o}=e,i=(c=v.getConfig().Auth)==null?void 0:c.Cognito,s={loginId:t,authFlowType:"USER_PASSWORD_AUTH"};w(i);const r=o==null?void 0:o.clientMetadata;U(!!t,y.EmptySignInUsername),U(!!n,y.EmptySignInPassword);try{const{ChallengeName:a,ChallengeParameters:d,AuthenticationResult:u,Session:l}=await Xe(ia,[t,n,r,i,O],t,O),h=Qe(t);return $e({signInSession:l,username:h,challengeName:a,signInDetails:s}),u?(await et({...u,username:h,NewDeviceMetadata:await Je({userPoolId:i.userPoolId,userPoolEndpoint:i.userPoolEndpoint,newDeviceMetadata:u.NewDeviceMetadata,accessToken:u.AccessToken}),signInDetails:s}),Z(),await tt(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):je({challengeName:a,challengeParameters:d})}catch(a){Z(),ue(a);const d=Ye(a.name);if(d)return d;throw a}}async function Aa(e){var n;const t=(n=e.options)==null?void 0:n.authFlowType;switch(await fa(),t){case"USER_SRP_AUTH":return qn(e);case"USER_PASSWORD_AUTH":return Ra(e);case"CUSTOM_WITHOUT_SRP":return Ca(e);case"CUSTOM_WITH_SRP":return Ta(e);default:return qn(e)}}const _a=3*60*1e3;function Na(e){const t=be.listen("auth-internal",async({payload:o})=>{switch(o.event){case"confirmSignUp":{const i=o.data;i!=null&&i.isSignUpComplete&&(be.dispatch("auth-internal",{event:"autoSignIn"}),t())}}}),n=setTimeout(()=>{t(),Ct(!1),clearTimeout(n)},_a)}let To=!1,Ro;function Ao(e){Ro=e}function Pa(e){return Ro===e}function ge(){return To}function Ct(e){e===!1&&Ao(void 0),To=e}function Te(e){return!!e.UserConfirmed}const Ua=e=>L(j,z("SignUp"),G(),{...Y,...e});async function ba(e){var S;const{username:t,password:n,options:o}=e,i=(S=v.getConfig().Auth)==null?void 0:S.Cognito,s=(i==null?void 0:i.signUpVerificationMethod)??"code",{clientMetadata:r,validationData:c,autoSignIn:a}=e.options??{};w(i),U(!!t,y.EmptySignUpUsername),U(!!n,y.EmptySignUpPassword);const d=typeof a!="boolean"?a:void 0;d==null||d.authFlowType,(d||a===!0)&&(Ao(t),Ct(!0));const{userPoolId:u,userPoolClientId:l,userPoolEndpoint:h}=i,g=await Ua({endpointResolver:_({endpointOverride:h})})({region:A(u),userAgentValue:$(F.SignUp)},{Username:t,Password:n,UserAttributes:(o==null?void 0:o.userAttributes)&&ln(o==null?void 0:o.userAttributes),ClientMetadata:r,ValidationData:c&&ln(c),ClientId:l,UserContextData:W({username:t,userPoolId:u,userPoolClientId:l})}),{UserSub:m,CodeDeliveryDetails:E}=g;if(Te(g)&&ge())return{isSignUpComplete:!0,nextStep:{signUpStep:"COMPLETE_AUTO_SIGN_IN"},userId:m};if(Te(g)&&!ge())return{isSignUpComplete:!0,nextStep:{signUpStep:"DONE"},userId:m};if(!Te(g)&&ge()&&s==="code")Na();else if(!Te(g)&&ge()&&s==="link")return{isSignUpComplete:!1,nextStep:{signUpStep:"COMPLETE_AUTO_SIGN_IN",codeDeliveryDetails:{deliveryMedium:E==null?void 0:E.DeliveryMedium,destination:E==null?void 0:E.Destination,attributeName:E==null?void 0:E.AttributeName}},userId:m};return{isSignUpComplete:!1,nextStep:{signUpStep:"CONFIRM_SIGN_UP",codeDeliveryDetails:{deliveryMedium:E==null?void 0:E.DeliveryMedium,destination:E==null?void 0:E.Destination,attributeName:E==null?void 0:E.AttributeName}},userId:m}}const Ma=e=>L(j,z("ResendConfirmationCode"),G(),{...Y,...e});async function Da(e){var p,g;const{username:t}=e;U(!!t,y.EmptySignUpUsername);const n=(p=v.getConfig().Auth)==null?void 0:p.Cognito;w(n);const{userPoolClientId:o,userPoolId:i,userPoolEndpoint:s}=n,r=(g=e.options)==null?void 0:g.clientMetadata,c=W({username:t,userPoolId:i,userPoolClientId:o}),a=Ma({endpointResolver:_({endpointOverride:s})}),{CodeDeliveryDetails:d}=await a({region:A(n.userPoolId),userAgentValue:$(F.ResendSignUpCode)},{Username:t,ClientMetadata:r,ClientId:n.userPoolClientId,UserContextData:c}),{DeliveryMedium:u,AttributeName:l,Destination:h}={...d};return{destination:h,deliveryMedium:u,attributeName:l||void 0}}const Fa=e=>L(j,z("ConfirmSignUp"),G(),{...Y,...e});async function Oa(e){var l;const{username:t,confirmationCode:n,options:o}=e,i=(l=v.getConfig().Auth)==null?void 0:l.Cognito;w(i);const{userPoolId:s,userPoolClientId:r,userPoolEndpoint:c}=i,a=o==null?void 0:o.clientMetadata;U(!!t,y.EmptyConfirmSignUpUsername),U(!!n,y.EmptyConfirmSignUpCode);const d=W({username:t,userPoolId:s,userPoolClientId:r});return await Fa({endpointResolver:_({endpointOverride:c})})({region:A(i.userPoolId),userAgentValue:$(F.ConfirmSignUp)},{Username:t,ConfirmationCode:n,ClientMetadata:a,ForceAliasCreation:o==null?void 0:o.forceAliasCreation,ClientId:i.userPoolClientId,UserContextData:d}),new Promise((h,p)=>{try{const g={isSignUpComplete:!0,nextStep:{signUpStep:"DONE"}};if(!ge()||!Pa(t)){h(g);return}const m=be.listen("auth-internal",({payload:E})=>{switch(E.event){case"autoSignIn":h({isSignUpComplete:!0,nextStep:{signUpStep:"COMPLETE_AUTO_SIGN_IN"}}),Ct(!1),m()}});be.dispatch("auth-internal",{event:"confirmSignUp",data:g})}catch(g){p(g)}})}const La=e=>L(j,z("GetUser"),G(),{...Y,...e});function ka(e,t){{const n=(e==null?void 0:e.find(Ka))??(e==null?void 0:e.find(Ba)),o=(e==null?void 0:e.find(Va))??(e==null?void 0:e.find(qa));if(n)return n;throw o?Ws:qs}}const Ka=e=>e.startsWith(String(window.location.origin+window.location.pathname)),Ba=e=>e.includes(String(window.location.hostname)),qa=e=>e.startsWith("http://"),Va=e=>e.startsWith("https://"),Wa=async e=>{window!=null&&window.location&&(window.location.href=e.replace("http://","https://"))},Ha=async e=>{var c;const t=(c=e.getConfig().Auth)==null?void 0:c.Cognito;w(t);const{userPoolEndpoint:n,userPoolId:o}=t,{tokens:i}=await eo(e,{forceRefresh:!1});fo(i);const s=La({endpointResolver:_({endpointOverride:n})}),{UserAttributes:r}=await s({region:A(o),userAgentValue:$(F.FetchUserAttributes)},{AccessToken:i.accessToken.toString()});return Fs(r)},$a=()=>Ha(v),za=async e=>{await e.clearOAuthData(),O.clearTokens(),await to(),se.dispatch("auth",{event:"signedOut"},"Auth",ne)},Ga=async(e,t=!1,n)=>{jn(e);const{loginWith:o,userPoolClientId:i}=e,{domain:s,redirectSignOut:r}=o.oauth,c=ka(r),a=`https://${s}/logout?${Object.entries({client_id:i,logout_uri:encodeURIComponent(c)}).map(([d,u])=>`${d}=${u}`).join("&")}`;return Wa(a)},ja=async(e,t,n,o)=>{const{isOAuthSignIn:i}=await t.loadOAuthSignIn(),s=await n.getOAuthMetadata();if(await za(t),i||s!=null&&s.oauthSignIn)return Ga(e,!1)},Ya=e=>L(j,z("RevokeToken"),G(),{...Y,...e}),Ja=new D("Auth");async function Xa(e){var o;const t=(o=v.getConfig().Auth)==null?void 0:o.Cognito;w(t),await Za(t);let n;try{jn(t),n=!0}catch{n=!1}if(n){const i=new Co(re);i.setAuthConfig(t);const{type:s}=await ja(t,i,O)??{};if(s==="error")throw new I({name:Hs,message:"An error occurred when attempting to log out from OAuth provider."})}else O.clearTokens(),await to(),se.dispatch("auth",{event:"signedOut"},"Auth",ne)}async function Za(e){try{const{userPoolEndpoint:t,userPoolId:n,userPoolClientId:o}=e,i=await O.getTokenStore().loadTokens();po(i),Qa(i.accessToken)&&await Ya({endpointResolver:_({endpointOverride:t})})({region:A(n),userAgentValue:$(F.SignOut)},{ClientId:o,Token:i.refreshToken})}catch{Ja.debug("Client signOut error caught but will proceed with token removal")}}const Qa=e=>{var t;return!!((t=e==null?void 0:e.payload)!=null&&t.origin_jti)},ec={identityId:"identityId"},tc=new D("DefaultIdentityIdStore");class nc{setAuthConfig(t){Ae(t.Cognito),this.authConfig=t,this._authKeys=oc("Cognito",t.Cognito.identityPoolId)}constructor(t){this._authKeys={},this._hasGuestIdentityId=!1,this.keyValueStorage=t}async loadIdentityId(){var t;Ae((t=this.authConfig)==null?void 0:t.Cognito);try{if(this._primaryIdentityId)return{id:this._primaryIdentityId,type:"primary"};{const n=await this.keyValueStorage.getItem(this._authKeys.identityId);return n?(this._hasGuestIdentityId=!0,{id:n,type:"guest"}):null}}catch(n){return tc.log("Error getting stored IdentityId.",n),null}}async storeIdentityId(t){var n;Ae((n=this.authConfig)==null?void 0:n.Cognito),t.type==="guest"?(this.keyValueStorage.setItem(this._authKeys.identityId,t.id),this._primaryIdentityId=void 0,this._hasGuestIdentityId=!0):(this._primaryIdentityId=t.id,this._hasGuestIdentityId&&(this.keyValueStorage.removeItem(this._authKeys.identityId),this._hasGuestIdentityId=!1))}async clearIdentityId(){this._primaryIdentityId=void 0,await this.keyValueStorage.removeItem(this._authKeys.identityId)}}const oc=(e,t)=>vt(ec)(`com.amplify.${e}`,t);function _o(e){const t=oe(e).payload.iss,n={};if(!t)throw new I({name:"InvalidIdTokenException",message:"Invalid Idtoken."});const o=t.replace(/(^\w+:|^)\/\//,"");return n[o]=e,n}const ic=new D("CognitoIdentityIdProvider");async function sc({tokens:e,authConfig:t,identityIdStore:n}){n.setAuthConfig({Cognito:t});let o=await n.loadIdentityId();if(e){if(o&&o.type==="primary")return o.id;{const i=e.idToken?_o(e.idToken.toString()):{},s=await Vn(i,t);o&&o.id===s&&ic.debug(`The guest identity ${o.id} has become the primary identity.`),o={id:s,type:"primary"}}}else{if(o&&o.type==="guest")return o.id;o={id:await Vn({},t),type:"guest"}}return n.storeIdentityId(o),o.id}async function Vn(e,t){const n=t==null?void 0:t.identityPoolId,o=rt(n),i=(await Ss({region:o},{IdentityPoolId:n,Logins:e})).IdentityId;if(!i)throw new I({name:"GetIdResponseException",message:"Received undefined response from getId operation",recoverySuggestion:"Make sure to pass a valid identityPoolId in the configuration."});return i}const Re=new D("CognitoCredentialsProvider"),Wn=50*60*1e3;class rc{constructor(t){this._nextCredentialsRefresh=0,this._identityIdStore=t}async clearCredentialsAndIdentityId(){Re.debug("Clearing out credentials and identityId"),this._credentialsAndIdentityId=void 0,await this._identityIdStore.clearIdentityId()}async clearCredentials(){Re.debug("Clearing out in-memory credentials"),this._credentialsAndIdentityId=void 0}async getCredentialsAndIdentityId(t){const n=t.authenticated,{tokens:o}=t,{authConfig:i}=t;try{Ae(i==null?void 0:i.Cognito)}catch{return}if(!n&&!i.Cognito.allowGuestAccess)return;const{forceRefresh:s}=t,r=this.hasTokenChanged(o),c=await sc({tokens:o,authConfig:i.Cognito,identityIdStore:this._identityIdStore});return(s||r)&&this.clearCredentials(),n?(Gs(o),this.credsForOIDCTokens(i.Cognito,o,c)):this.getGuestCredentials(c,i.Cognito)}async getGuestCredentials(t,n){if(this._credentialsAndIdentityId&&!this.isPastTTL()&&this._credentialsAndIdentityId.isAuthenticatedCreds===!1)return Re.info("returning stored credentials as they neither past TTL nor expired."),this._credentialsAndIdentityId;this.clearCredentials();const o=rt(n.identityPoolId),i=await cn({region:o},{IdentityId:t});if(i.Credentials&&i.Credentials.AccessKeyId&&i.Credentials.SecretKey){this._nextCredentialsRefresh=new Date().getTime()+Wn;const s={credentials:{accessKeyId:i.Credentials.AccessKeyId,secretAccessKey:i.Credentials.SecretKey,sessionToken:i.Credentials.SessionToken,expiration:i.Credentials.Expiration},identityId:t},r=i.IdentityId;return r&&(s.identityId=r,this._identityIdStore.storeIdentityId({id:r,type:"guest"})),this._credentialsAndIdentityId={...s,isAuthenticatedCreds:!1},s}else throw new I({name:"CredentialsNotFoundException",message:"Cognito did not respond with either Credentials, AccessKeyId or SecretKey."})}async credsForOIDCTokens(t,n,o){var c;if(this._credentialsAndIdentityId&&!this.isPastTTL()&&this._credentialsAndIdentityId.isAuthenticatedCreds===!0)return Re.debug("returning stored credentials as they neither past TTL nor expired."),this._credentialsAndIdentityId;this.clearCredentials();const i=n.idToken?_o(n.idToken.toString()):{},s=rt(t.identityPoolId),r=await cn({region:s},{IdentityId:o,Logins:i});if(r.Credentials&&r.Credentials.AccessKeyId&&r.Credentials.SecretKey){const a={credentials:{accessKeyId:r.Credentials.AccessKeyId,secretAccessKey:r.Credentials.SecretKey,sessionToken:r.Credentials.SessionToken,expiration:r.Credentials.Expiration},identityId:o};this._credentialsAndIdentityId={...a,isAuthenticatedCreds:!0,associatedIdToken:(c=n.idToken)==null?void 0:c.toString()},this._nextCredentialsRefresh=new Date().getTime()+Wn;const d=r.IdentityId;return d&&(a.identityId=d,this._identityIdStore.storeIdentityId({id:d,type:"primary"})),a}else throw new I({name:"CredentialsException",message:"Cognito did not respond with either Credentials, AccessKeyId or SecretKey."})}isPastTTL(){return this._nextCredentialsRefresh===void 0?!0:this._nextCredentialsRefresh<=Date.now()}hasTokenChanged(t){var n,o;return!!t&&!!((n=this._credentialsAndIdentityId)!=null&&n.associatedIdToken)&&((o=t.idToken)==null?void 0:o.toString())!==this._credentialsAndIdentityId.associatedIdToken}}const ac=new rc(new nc(re)),cc={configure(e,t){const n=Jn(e);if(!n.Auth){v.configure(n,t);return}if(t!=null&&t.Auth){v.configure(n,t);return}if(!v.libraryOptions.Auth){pe.setAuthConfig(n.Auth),pe.setKeyValueStorage(t!=null&&t.ssr?new dn({sameSite:"lax"}):re),v.configure(n,{...t,Auth:{tokenProvider:pe,credentialsProvider:ac}});return}if(t){t.ssr!==void 0&&pe.setKeyValueStorage(t.ssr?new dn({sameSite:"lax"}):re),v.configure(n,{Auth:v.libraryOptions.Auth,...t});return}v.configure(n)},getConfig(){return v.getConfig()}},Hn={aws_project_region:"us-east-1",aws_cognito_identity_pool_id:"us-east-1:d0594671-a662-4d22-b283-e2e330056131",aws_cognito_region:"us-east-1",aws_user_pools_id:"us-east-1_LeF5pU93Y",aws_user_pools_web_client_id:"4qjbpmr5qqahcn5j6ohvvio95u",oauth:{},aws_cognito_username_attributes:["EMAIL"],aws_cognito_social_providers:[],aws_cognito_signup_attributes:["EMAIL","NAME"],aws_cognito_mfa_configuration:"OFF",aws_cognito_mfa_types:["SMS"],aws_cognito_password_protection_settings:{passwordPolicyMinLength:8,passwordPolicyCharacters:[]},aws_cognito_verification_mechanisms:["EMAIL"]};cc.configure({Auth:{Cognito:{userPoolId:Hn.aws_user_pools_id,userPoolClientId:Hn.aws_user_pools_web_client_id}}});const dc={user:null,isInitialized:!1,isAuthenticated:!1},uc=(e,t)=>{switch(t.type){case"INIT":return{...e,isInitialized:!0,user:t.payload.user,isAuthenticated:t.payload.isAuthenticated};case"LOGOUT":return{...e,isAuthenticated:!1,user:null};default:return e}},lc=q.createContext({});function pc({children:e}){const[t,n]=q.useReducer(uc,dc),o=q.useCallback(async()=>{try{const{tokens:u}=await Xi();if(u){const l=await $a();n({type:"INIT",payload:{isAuthenticated:!0,user:{role:"admin",id:l.sub,name:l.name,email:l.email}}})}else n({type:"INIT",payload:{isAuthenticated:!1,user:null}})}catch{n({type:"INIT",payload:{isAuthenticated:!1,user:null}})}},[]);q.useEffect(()=>{o()},[]);const i=q.useCallback(async(u,l)=>{try{const{isSignedIn:h}=await Aa({username:u,password:l});h&&o()}catch(h){throw h}},[]),s=q.useCallback(async(u,l,h,p)=>ba({username:u,password:l,options:{userAttributes:{email:u,given_name:h,family_name:p,name:`${h} ${p}`}}}),[]),r=q.useCallback(async(u,l)=>Oa({confirmationCode:l,username:u}),[]),c=q.useCallback(async u=>Da({username:u}),[]),a=q.useCallback(async()=>{await Xa(),n({type:"LOGOUT"})},[]),d=q.useMemo(()=>({...t,method:"AMPLIFY",login:i,logout:a,register:s,resendCode:c,emailVerify:r}),[t,i,a,s,c,r]);return t.isInitialized?Kt.jsx(lc.Provider,{value:d,children:e}):Kt.jsx(Bo,{})}export{lc as A,pc as a};
