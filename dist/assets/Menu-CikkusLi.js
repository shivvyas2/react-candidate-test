import{r as u,aF as G,aJ as W,aK as V,aG as _,j as L,aL as $,aM as J,ao as q,al as B,s as T,aN as Q,aC as X,aO as Y,as as Z,ay as ee,aP as j,ai as te,ak as se}from"./index-DiONe1dj.js";function F(t,e,r){return t===e?t.firstChild:e&&e.nextElementSibling?e.nextElementSibling:r?null:t.firstChild}function O(t,e,r){return t===e?r?t.firstChild:t.lastChild:e&&e.previousElementSibling?e.previousElementSibling:r?null:t.lastChild}function H(t,e){if(e===void 0)return!0;let r=t.innerText;return r===void 0&&(r=t.textContent),r=r.trim().toLowerCase(),r.length===0?!1:e.repeating?r[0]===e.keys[0]:r.startsWith(e.keys.join(""))}function S(t,e,r,P,f,w){let h=!1,l=f(t,e,e?r:!1);for(;l;){if(l===t.firstChild){if(h)return!1;h=!0}const c=P?!1:l.disabled||l.getAttribute("aria-disabled")==="true";if(!l.hasAttribute("tabindex")||!H(l,w)||c)l=f(t,l,r);else return l.focus(),!0}return!1}const re=u.forwardRef(function(e,r){const{actions:P,autoFocus:f=!1,autoFocusItem:w=!1,children:h,className:l,disabledItemsFocusable:c=!1,disableListWrap:m=!1,onKeyDown:y,variant:v="selectedMenu",...k}=e,p=u.useRef(null),x=u.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});G(()=>{f&&p.current.focus()},[f]),u.useImperativeHandle(P,()=>({adjustStyleForScrollbar:(s,{direction:o})=>{const a=!p.current.style.width;if(s.clientHeight<p.current.clientHeight&&a){const g=`${W(V(s))}px`;p.current.style[o==="rtl"?"paddingLeft":"paddingRight"]=g,p.current.style.width=`calc(100% + ${g})`}return p.current}}),[]);const C=s=>{const o=p.current,a=s.key;if(s.ctrlKey||s.metaKey||s.altKey){y&&y(s);return}const M=J(o).activeElement;if(a==="ArrowDown")s.preventDefault(),S(o,M,m,c,F);else if(a==="ArrowUp")s.preventDefault(),S(o,M,m,c,O);else if(a==="Home")s.preventDefault(),S(o,null,m,c,F);else if(a==="End")s.preventDefault(),S(o,null,m,c,O);else if(a.length===1){const n=x.current,I=a.toLowerCase(),D=performance.now();n.keys.length>0&&(D-n.lastTime>500?(n.keys=[],n.repeating=!0,n.previousKeyMatched=!0):n.repeating&&I!==n.keys[0]&&(n.repeating=!1)),n.lastTime=D,n.keys.push(I);const b=M&&!n.repeating&&H(M,n);n.previousKeyMatched&&(b||S(o,M,!1,c,F,n))?s.preventDefault():n.previousKeyMatched=!1}y&&y(s)},R=_(p,r);let i=-1;u.Children.forEach(h,(s,o)=>{if(!u.isValidElement(s)){i===o&&(i+=1,i>=h.length&&(i=-1));return}s.props.disabled||(v==="selectedMenu"&&s.props.selected||i===-1)&&(i=o),i===o&&(s.props.disabled||s.props.muiSkipListHighlight||s.type.muiSkipListHighlight)&&(i+=1,i>=h.length&&(i=-1))});const E=u.Children.map(h,(s,o)=>{if(o===i){const a={};return w&&(a.autoFocus=!0),s.props.tabIndex===void 0&&v==="selectedMenu"&&(a.tabIndex=0),u.cloneElement(s,a)}return s});return L.jsx($,{role:"menu",ref:R,className:l,onKeyDown:C,tabIndex:f?0:-1,...k,children:E})});function oe(t){return B("MuiMenu",t)}q("MuiMenu",["root","paper","list"]);const ne={vertical:"top",horizontal:"right"},ae={vertical:"top",horizontal:"left"},ie=t=>{const{classes:e}=t;return se({root:["root"],paper:["paper"],list:["list"]},oe,e)},le=T(Q,{shouldForwardProp:t=>X(t)||t==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(t,e)=>e.root})({}),ue=T(Y,{name:"MuiMenu",slot:"Paper",overridesResolver:(t,e)=>e.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),ce=T(re,{name:"MuiMenu",slot:"List",overridesResolver:(t,e)=>e.list})({outline:0}),fe=u.forwardRef(function(e,r){const P=Z({props:e,name:"MuiMenu"}),{autoFocus:f=!0,children:w,className:h,disableAutoFocusItem:l=!1,MenuListProps:c={},onClose:m,open:y,PaperProps:v={},PopoverClasses:k,transitionDuration:p="auto",TransitionProps:{onEntering:x,...C}={},variant:R="selectedMenu",slots:i={},slotProps:E={},...s}=P,o=ee(),a={...P,autoFocus:f,disableAutoFocusItem:l,MenuListProps:c,onEntering:x,PaperProps:v,transitionDuration:p,TransitionProps:C,variant:R},g=ie(a),M=f&&!l&&y,n=u.useRef(null),I=(d,K)=>{n.current&&n.current.adjustStyleForScrollbar(d,{direction:o?"rtl":"ltr"}),x&&x(d,K)},D=d=>{d.key==="Tab"&&(d.preventDefault(),m&&m(d,"tabKeyDown"))};let b=-1;u.Children.map(w,(d,K)=>{u.isValidElement(d)&&(d.props.disabled||(R==="selectedMenu"&&d.props.selected||b===-1)&&(b=K))});const N=i.paper??ue,A=E.paper??v,z=j({elementType:i.root,externalSlotProps:E.root,ownerState:a,className:[g.root,h]}),U=j({elementType:N,externalSlotProps:A,ownerState:a,className:g.paper});return L.jsx(le,{onClose:m,anchorOrigin:{vertical:"bottom",horizontal:o?"right":"left"},transformOrigin:o?ne:ae,slots:{paper:N,root:i.root},slotProps:{root:z,paper:U},open:y,ref:r,transitionDuration:p,TransitionProps:{onEntering:I,...C},ownerState:a,...s,classes:k,children:L.jsx(ce,{onKeyDown:D,actions:n,autoFocus:f&&(b===-1||l),autoFocusItem:M,variant:R,...c,className:te(g.list,c.className),children:w})})});export{fe as M,re as a};
